
/* DISPLAY */

.shown {
  display: flex !important;
}

// Every element with a `hidden` attribute will be considered as hidden as well (SOURCE: PureCSS)

.hidden,
[hidden] {
  display: none !important;
}


/* CONTENT */

.content-start {
  justify-content: flex-start !important;
}

.content-center {
  justify-content: center !important;
}

.content-end {
  justify-content: flex-end !important;
}


/* GROW */

.grow {
  flex-grow: 1 !important;
}

.no-grow {
  flex-grow: 0 !important;
}


/* ITEMS */

.items-start {
  align-items: flex-start !important;
}

.items-center {
  align-items: center !important;
}

.items-end {
  align-items: flex-end !important;
}


/* SHRINK */

.shrink {
  flex-shrink: 1 !important;
}

.no-shrink {
  flex-shrink: 0 !important;
}


/* OVERFLOW */

.overflow-visible {
  overflow: visible !important;
}

.overflow-hidden {
  overflow: hidden !important;
}

.overflow-scroll {
  overflow: scroll !important;
}

/* X */

.overflow-x-visible { //TODO: Add demo
  overflow-x: visible !important;
}

.overflow-x-hidden {
  overflow-x: hidden !important;
}

.overflow-x-scroll {
  overflow-x: scroll !important;
}

/* Y */

.overflow-y-visible { //TODO: Add demo
  overflow-y: visible !important;
}

.overflow-y-hidden {
  overflow-y: hidden !important;
}

.overflow-y-scroll {
  overflow-y: scroll !important;
}


/* ROTATION */

.rotate-left {
  transform: rotate(-90deg) !important;
}

.rotate-right {
  transform: rotate(90deg) !important;
}

.rotating {
  animation: rotate $rotating-animation-duration linear infinite !important;
}


.rotate--90 {
  transform: rotate( -90deg );
}

.rotate-180 {
  transform: rotate( 180deg );
}


//SOURCE: https://github.com/twbs/bootstrap/blob/v4-dev/scss/utilities/_screenreaders.scss

/* SCREEN READER */

.screen-reader-only {
  @include screen-reader-only ();
}

.screen-reader-only-focusable {
  @include screen-reader-only-focusable ();
}


/* ALIGNMENT */

.text-left {
  text-align: left !important;
}

.text-center {
  text-align: center !important;
}

.text-right {
  text-align: right !important;
}

.text-justify {
  text-align: justify !important;
}


/* OTHERS */

.text-nowrap,
.text-no-wrap {
  white-space: nowrap !important;
}

.text-truncate {
  @include text-truncate ();
}

.text-hide {
  @include text-hide ();
}


/* TRANSFORMATION */

.text-lowercase {
  text-transform: lowercase !important;
}

.text-uppercase {
  text-transform: uppercase !important;
}

.text-capitalize {
  text-transform: capitalize !important;
}


/* VISIBILITY */

.visible {
  visibility: visible !important;
}

.invisible {
  visibility: hidden !important;
}


/* ANIMATIONS */

.no-animations,
.no-animations * {
  transition: none !important;
}


/* SUPPORT */

$browser-support-browsers:  ( 'chrome', 'firefox', 'edge', 'ie', 'opera', 'safari', 'uc' ) !default;
$browser-support-devices: ( 'desktop', 'mobile', 'tablet' ) !default;
$browser-support-oss: ( 'ios', 'android', 'blackberry', 'linux', 'mac', 'windows' ) !default;


//TODO: Add a 'center-x-left', 'center-x-right', `center-y-top`, `center-y-bottom`
//TODO: Modularize it (Possible in a clean way?)
//FIXME: `.multiple.fluid.joined` is rendered differently in Safari (In the demo the container with `Right` inside doesn't grow enough)
//FIXME: In the `toolbar` demo if we set their padding to 0 the margin shows up and the gutter between toolbars disappears

/* MULTIPLE */

%multiple {}

.multiple {

  @extend %multiple;
  @include last-child-no-gutter ( 0, - $gutter );
  position: relative;
  display: flex;
  flex-wrap: wrap;
  align-items: flex-start;

  /* GUTTER */

  // In order to support inline elements that don't have a `margin-bottom` setted

  > :not(.multiple) {
    margin-bottom: $gutter;
  }

  /* GUTTER NORMAL */

  &:not(.no-wrap):not(.vertical):not(.joined) {

    @include margin-x ( - $gutter-half );

    > :not(.multiple) {
      @include margin-x ( $gutter-half );
    }

    > .multiple:not(.no-wrap):not(.vertical):not(.joined) {
      @include margin-x ( 0 );
    }

    > .multiple.no-wrap,
    > .multiple.vertical,
    > .multiple.joined {
      @include margin-x ( $gutter-half );
    }

  }

  /* GUTTER NO-WRAP */

  &.no-wrap:not(.vertical):not(.joined) {

    > :not(.multiple) {

      &:not(:first-child) {
        margin-left: $gutter-half;
      }

      &:not(:last-child) {
        margin-right: $gutter-half;
      }

    }

    > .multiple:not(.no-wrap):not(.vertical):not(.joined) {

      &:not(:first-child) {
        margin-left: 0;
      }

      &:not(:last-child) {
        margin-right: 0;
      }

    }

    > .multiple.no-wrap,
    > .multiple.vertical,
    > .multiple.joined {

      &:not(:first-child) {
        margin-left: $gutter-half;
      }

      &:not(:last-child) {
        margin-right: $gutter-half;
      }

    }

  }

  /* GUTTER VERTICAL */

  &.vertical {

    > .multiple:not(.no-wrap):not(.vertical):not(.joined) {

      @include margin-x ( 0 );

      > :not(.multiple) {

        &:first-child {
          margin-left: 0;
        }

        &:last-child {
          margin-right: 0;
        }

      }

      > .multiple:not(.no-wrap):not(.vertical):not(.joined) {

        &:first-child {
          margin-left: - $gutter-half;
        }

        &:last-child {
          margin-right: - $gutter-half;
        }

      }

      > .multiple.no-wrap,
      > .multiple.vertical,
      > .multiple.joined {

        &:first-child {
          margin-left: 0;
        }

        &:not(:last-child) {
          margin-right: $gutter-half;
        }

        &:not(:first-child) {
          margin-left: $gutter-half;
        }

        &:last-child {
          margin-right: 0;
        }

      }

    }

  }

  /* VERTICAL */

  &.vertical {
    flex-direction: column;
  }

  /* CENTER */

  &.center-x:not(.vertical),
  &.center-y.vertical,
  &.center {
    justify-content: center;
  }

  &.center-y:not(.vertical),
  &.center-x.vertical,
  &.center {
    align-items: center;
  }

  /* NO WRAP */

  &.no-wrap {
    flex-wrap: nowrap;
  }

  /* EQUAL */

  &.equal {

    &:not(.vertical) > * {
      flex: 1 0 0%; // IE-10/11 misinterpreter a unitless 0 flex-basis
    }

    &.vertical > * {
      width: 100%;
    }

  }

  /* JOINED */

  &.joined {

    flex-wrap: nowrap;
    align-items: stretch;

    > .multiple {
      @include margin-x ( 0 );
    }

    &:not(.vertical) {

      > :not(:last-child),
      > .multiple:not(:last-child) > :last-child,
      > .multiple.joined.vertical:not(:last-child) > :not(.multiple),
      > .multiple.joined.vertical:not(:last-child) > .multiple.joined > :not(.multiple) {
        @include border-right-radius ( 0 );
        margin-right: 0;
        border-right-width: 0;
      }

      > :not(:first-child),
      > .multiple:not(:first-child) > :first-child,
      > .multiple.joined.vertical:not(:first-child) > :not(.multiple),
      > .multiple.joined.vertical:not(:first-child) > .multiple.joined > :not(.multiple) {
        @include border-left-radius ( 0 );
        margin-left: 0;
      }

      &.no-separators {

        > :not(:first-child),
        > .multiple:not(:first-child) > :first-child,
        > .multiple.joined.vertical:not(:first-child) > :not(.multiple) {
          border-left-width: 0;
        }

        > .multiple:not(:last-child) > :last-child {
          border-right-width: 0;
        }

        > .multiple.joined.vertical > :not(.multiple):not(:first-child) {
          border-top-width: 0;
        }

      }

      &.only-separators {

        > :first-child,
        > .multiple:first-child > :first-child,
        > .multiple.joined.vertical:first-child > :not(.multiple) {
          border-left-width: 0;
        }

        > :last-child,
        > .multiple:last-child > :last-child,
        > .multiple.joined.vertical:last-child > :not(.multiple) {
          border-right-width: 0;
        }

        > .multiple.joined.vertical > :not(.multiple):first-child {
          border-top-width: 0;
        }

        > .multiple.joined.vertical > :not(.multiple):last-child {
          border-bottom-width: 0;
        }

      }

    }

    &.vertical {

      > :not(:last-child),
      > .multiple:not(:last-child) > :last-child,
      > .multiple.joined:not(.vertical):not(:last-child) > :not(.multiple),
      > .multiple.joined:not(.vertical):not(:last-child) > .multiple.joined > :not(.multiple) {
        @include border-bottom-radius ( 0 );
        margin-bottom: 0;
        border-bottom-width: 0;
      }

      > :not(:first-child),
      > .multiple:not(:first-child) > :first-child,
      > .multiple.joined:not(.vertical):not(:first-child) > :not(.multiple),
      > .multiple.joined:not(.vertical):not(:first-child) > .multiple.joined > :not(.multiple) {
        @include border-top-radius ( 0 );
        margin-top: 0;
      }

      &.no-separators {

        > :not(:first-child),
        > .multiple:not(:first-child) > :first-child,
        > .multiple.joined:not(.vertical):not(:first-child) > :not(.multiple) {
          border-top-width: 0;
        }

        > .multiple:not(:last-child) > :last-child {
          border-bottom-width: 0;
        }

        > .multiple.joined:not(.vertical) > :not(.multiple):not(:first-child) {
          border-left-width: 0;
        }

      }

      &.only-separators {

        > :first-child,
        > .multiple:first-child > :first-child,
        > .multiple.joined:not(.vertical):first-child > :not(.multiple) {
          border-top-width: 0;
        }

        > :last-child,
        > .multiple:last-child > :last-child,
        > .multiple.joined:not(.vertical):last-child > :not(.multiple) {
          border-bottom-width: 0;
        }

        > .multiple.joined:not(.vertical) > :not(.multiple):first-child {
          border-left-width: 0;
        }

        > .multiple.joined:not(.vertical) > :not(.multiple):last-child {
          border-right-width: 0;
        }

      }

    }

  }

  /* STRETCHED */

  &.stretched {

    align-items: stretch;

    > * {
      flex-grow: 1;
    }

  }

}

/* INLINE CHILDREN FIX (IE10) */

html.no-flexbox.flexbox-tweener {

  /* MULTIPLE */

  .multiple {

    /* INLINE CHILDREN */

    > a,
    > button,
    > span {
      display: inline-block;
    }

  }

}


// @optional core/multiple/multiple.scss

/* SCRIPT */

script:last-child {

  @include text-hide (); // This fixes a bug in iOS Safari where some space will be counted even while using `font-size: 0`
  display: block;
  margin-top: - $gutter;

  %multiple > & {
    margin-top: 0;
  }

}


// @optional core/multiple/multiple.scss

/* LAYOUT */

.layout {

  @include children-no-gutter ();
  position: relative;
  display: flex;
  align-items: stretch;

  /* HEADER / CONTENT / FOOTER */

  &-header,
  &-content,
  &-footer {
    border-radius: 0;
    flex-shrink: 0; // Avoids padding collpasing
  }

  /* HEADER */

  &-header {
    background-color: $layout-header-bg-color;
    border-color: $layout-header-border-color;
    color: $layout-header-color;
  }

  /* CONTENT */

  &-content {
    padding: $layout-content-padding-y $layout-content-padding-x;
    flex-grow: 1; // Needed for having the `.layout-footer` stick to the bottom/right
  }

  /* FOOTER */

  &-footer {
    background-color: $layout-footer-bg-color;
    border-color: $layout-footer-border-color;
    color: $layout-footer-color;
  }

}

/* FIRST LAYOUT */

// It'll almost certanly be the `body`, but just for the sake of writing it in a generic way we don't assume that

.layout {

  height: 100%; // Setting `min-height` won't work on IE 10/11

  /* NOT FIRST */

  .layout {
    height: auto;
  }

  /* GUTTER */

  .layout:not(:last-child),
  %multiple > .layout:last-child {
    margin-bottom: $gutter;
  }

}


.layout-content {
  height: 0;
  overflow: auto;
}


// @require ../layout.scss

// Header and Footer are always "sticky"

/* HORIZONTAL */

.layout.horizontal {

  flex-direction: row;
  overflow: hidden;

  /* CONTENT */

  > .layout-content {
    overflow: auto;
    flex-shrink: 1;
  }

}


// @require ../layout.scss

/* VERTICAL */

.layout.vertical {
  flex-direction: column;
  overflow: auto
}


// @optional ./horizontal.scss
// @optional ./vertical.scss

/* DEFAULT */

.layout:not(.vertical):not(.horizontal) {
  @extend .layout.vertical;
}


// @require ../layout.scss

@media not print { // Disabled when printing

  /* FIRST LAYOUT */

  .layout.vertical {

    /* HEADER */

    > .layout-header.sticky {

      @include position ( fixed, 0 0 false 0 );
      z-index: $layout-sticky-header-z-index !important;

      + .layout-content {
        margin-top: $layout-sticky-header-height;
      }

    }

    /* NOT FIRST */

    .layout.vertical {

      /* HEADER */

      > .layout-header.sticky {

        position: relative;
        position: sticky; // Unfortunately not well supported at the moment (FF >= 32, Safari >= 6.1)
        z-index: $layout-sticky-header-z-index - 1 !important;

        + .layout-content {
          margin-top: 0;
        }

      }

    }

  }

}


// Inheriting border color, it is useful to get access to parent's border color

/* BORDER COLOR */

* {
  border-color: inherit;
}


//SOURCE: The idea cames from here: http://www.paulirish.com/2012/box-sizing-border-box-ftw

/* BORDER BOX */

*,
:before,
:after {
  box-sizing: inherit;
}

html {
  box-sizing: border-box;
}


// IE 10 sets flex to `0 0 auto` by default, when it should actually be `0 1 auto`

/* FLEXBOX */

*,
:before,
:after {
  flex-shrink: 1;
}


/* FULLSCREEN */

:not(html):fullscreen {
  width: 100% !important;
  height: 100% !important;
}


/* NO OUTLINE ON FOCUS */

:focus {
  outline: 0;
}


/* OPACITY */

// Firefox sets an opacity lower than 1

::placeholder {
  opacity: 1;
}


/* SELECTION */

::selection {
  background-color: $selection-bg-color;
  text-shadow: none;
}


/* NO SPACING */

table {
  border-spacing: 0;
}


//SOURCE: https://github.com/twbs/bootstrap/blob/v4-dev/scss/_reboot.scss

// Mainly for avoiding the 300ms click delay on touch devices that support the `touch-action` CSS property

/* TOUCH ACTION */

a,
area,
button,
input,
label,
select,
summary,
textarea {
  touch-action: manipulation;
}

/*! normalize.css v5.0.0 | MIT License | github.com/necolas/normalize.css */

/**
 * 1. Change the default font family in all browsers (opinionated).
 * 2. Correct the line height in all browsers.
 * 3. Prevent adjustments of font size after orientation changes in
 *    IE on Windows Phone and in iOS.
 */

/* Document
   ========================================================================== */

html {
  font-family: sans-serif; /* 1 */
  line-height: 1.15; /* 2 */
  -ms-text-size-adjust: 100%; /* 3 */
  -webkit-text-size-adjust: 100%; /* 3 */
}

/* Sections
   ========================================================================== */

/**
 * Remove the margin in all browsers (opinionated).
 */

body {
  margin: 0;
}

/**
 * Add the correct display in IE 9-.
 */

article,
aside,
footer,
header,
nav,
section {
  display: block;
}

/**
 * Correct the font size and margin on `h1` elements within `section` and
 * `article` contexts in Chrome, Firefox, and Safari.
 */

h1 {
  font-size: 2em;
  margin: 0.67em 0;
}

/* Grouping content
   ========================================================================== */

/**
 * Add the correct display in IE 9-.
 * 1. Add the correct display in IE.
 */

figcaption,
figure,
main { /* 1 */
  display: block;
}

/**
 * Add the correct margin in IE 8.
 */

figure {
  margin: 1em 40px;
}

/**
 * 1. Add the correct box sizing in Firefox.
 * 2. Show the overflow in Edge and IE.
 */

hr {
  box-sizing: content-box; /* 1 */
  height: 0; /* 1 */
  overflow: visible; /* 2 */
}

/**
 * 1. Correct the inheritance and scaling of font size in all browsers.
 * 2. Correct the odd `em` font sizing in all browsers.
 */

pre {
  font-family: monospace, monospace; /* 1 */
  font-size: 1em; /* 2 */
}

/* Text-level semantics
   ========================================================================== */

/**
 * 1. Remove the gray background on active links in IE 10.
 * 2. Remove gaps in links underline in iOS 8+ and Safari 8+.
 */

a {
  background-color: transparent; /* 1 */
  -webkit-text-decoration-skip: objects; /* 2 */
}

/**
 * Remove the outline on focused links when they are also active or hovered
 * in all browsers (opinionated).
 */

a:active,
a:hover {
  outline-width: 0;
}

/**
 * 1. Remove the bottom border in Firefox 39-.
 * 2. Add the correct text decoration in Chrome, Edge, IE, Opera, and Safari.
 */

abbr[title] {
  border-bottom: none; /* 1 */
  text-decoration: underline; /* 2 */
  text-decoration: underline dotted; /* 2 */
}

/**
 * Prevent the duplicate application of `bolder` by the next rule in Safari 6.
 */

b,
strong {
  font-weight: inherit;
}

/**
 * Add the correct font weight in Chrome, Edge, and Safari.
 */

b,
strong {
  font-weight: bolder;
}

/**
 * 1. Correct the inheritance and scaling of font size in all browsers.
 * 2. Correct the odd `em` font sizing in all browsers.
 */

code,
kbd,
samp {
  font-family: monospace, monospace; /* 1 */
  font-size: 1em; /* 2 */
}

/**
 * Add the correct font style in Android 4.3-.
 */

dfn {
  font-style: italic;
}

/**
 * Add the correct background and color in IE 9-.
 */

mark {
  background-color: #ff0;
  color: #000;
}

/**
 * Add the correct font size in all browsers.
 */

small {
  font-size: 80%;
}

/**
 * Prevent `sub` and `sup` elements from affecting the line height in
 * all browsers.
 */

sub,
sup {
  font-size: 75%;
  line-height: 0;
  position: relative;
  vertical-align: baseline;
}

sub {
  bottom: -0.25em;
}

sup {
  top: -0.5em;
}

/* Embedded content
   ========================================================================== */

/**
 * Add the correct display in IE 9-.
 */

audio,
video {
  display: inline-block;
}

/**
 * Add the correct display in iOS 4-7.
 */

audio:not([controls]) {
  display: none;
  height: 0;
}

/**
 * Remove the border on images inside links in IE 10-.
 */

img {
  border-style: none;
}

/**
 * Hide the overflow in IE.
 */

svg:not(:root) {
  overflow: hidden;
}

/* Forms
   ========================================================================== */

/**
 * 1. Change the font styles in all browsers (opinionated).
 * 2. Remove the margin in Firefox and Safari.
 */

button,
input,
optgroup,
select,
textarea {
  font-family: sans-serif; /* 1 */
  font-size: 100%; /* 1 */
  line-height: 1.15; /* 1 */
  margin: 0; /* 2 */
}

/**
 * Show the overflow in IE.
 * 1. Show the overflow in Edge.
 */

button,
input { /* 1 */
  overflow: visible;
}

/**
 * Remove the inheritance of text transform in Edge, Firefox, and IE.
 * 1. Remove the inheritance of text transform in Firefox.
 */

button,
select { /* 1 */
  text-transform: none;
}

/**
 * 1. Prevent a WebKit bug where (2) destroys native `audio` and `video`
 *    controls in Android 4.
 * 2. Correct the inability to style clickable types in iOS and Safari.
 */

button,
html [type="button"], /* 1 */
[type="reset"],
[type="submit"] {
  -webkit-appearance: button; /* 2 */
}

/**
 * Remove the inner border and padding in Firefox.
 */

button::-moz-focus-inner,
[type="button"]::-moz-focus-inner,
[type="reset"]::-moz-focus-inner,
[type="submit"]::-moz-focus-inner {
  border-style: none;
  padding: 0;
}

/**
 * Restore the focus styles unset by the previous rule.
 */

button:-moz-focusring,
[type="button"]:-moz-focusring,
[type="reset"]:-moz-focusring,
[type="submit"]:-moz-focusring {
  outline: 1px dotted ButtonText;
}

/**
 * Change the border, margin, and padding in all browsers (opinionated).
 */

fieldset {
  border: 1px solid #c0c0c0;
  margin: 0 2px;
  padding: 0.35em 0.625em 0.75em;
}

/**
 * 1. Correct the text wrapping in Edge and IE.
 * 2. Correct the color inheritance from `fieldset` elements in IE.
 * 3. Remove the padding so developers are not caught out when they zero out
 *    `fieldset` elements in all browsers.
 */

legend {
  box-sizing: border-box; /* 1 */
  color: inherit; /* 2 */
  display: table; /* 1 */
  max-width: 100%; /* 1 */
  padding: 0; /* 3 */
  white-space: normal; /* 1 */
}

/**
 * 1. Add the correct display in IE 9-.
 * 2. Add the correct vertical alignment in Chrome, Firefox, and Opera.
 */

progress {
  display: inline-block; /* 1 */
  vertical-align: baseline; /* 2 */
}

/**
 * Remove the default vertical scrollbar in IE.
 */

textarea {
  overflow: auto;
}

/**
 * 1. Add the correct box sizing in IE 10-.
 * 2. Remove the padding in IE 10-.
 */

[type="checkbox"],
[type="radio"] {
  box-sizing: border-box; /* 1 */
  padding: 0; /* 2 */
}

/**
 * Correct the cursor style of increment and decrement buttons in Chrome.
 */

[type="number"]::-webkit-inner-spin-button,
[type="number"]::-webkit-outer-spin-button {
  height: auto;
}

/**
 * 1. Correct the odd appearance in Chrome and Safari.
 * 2. Correct the outline style in Safari.
 */

[type="search"] {
  -webkit-appearance: textfield; /* 1 */
  outline-offset: -2px; /* 2 */
}

/**
 * Remove the inner padding and cancel buttons in Chrome and Safari on macOS.
 */

[type="search"]::-webkit-search-cancel-button,
[type="search"]::-webkit-search-decoration {
  -webkit-appearance: none;
}

/**
 * 1. Correct the inability to style clickable types in iOS and Safari.
 * 2. Change font properties to `inherit` in Safari.
 */

::-webkit-file-upload-button {
  -webkit-appearance: button; /* 1 */
  font: inherit; /* 2 */
}

/* Interactive
   ========================================================================== */

/*
 * Add the correct display in IE 9-.
 * 1. Add the correct display in Edge, IE, and Firefox.
 */

details, /* 1 */
menu {
  display: block;
}

/*
 * Add the correct display in all browsers.
 */

summary {
  display: list-item;
}

/* Scripting
   ========================================================================== */

/**
 * Add the correct display in IE 9-.
 */

canvas {
  display: inline-block;
}

/**
 * Add the correct display in IE.
 */

template {
  display: none;
}

/* Hidden
   ========================================================================== */

/**
 * Add the correct display in IE 10-.
 */

[hidden] {
  display: none;
}


// @optional ./vendor/normalize.scss

/* BORDER / iOS SHADOW */

input {
  border: 0;
  appearance: none !important;
  font-family: $font-family-root;
}

/* NUMBER */

[type="number"] {

  -moz-appearance: textfield !important;

  &::-webkit-inner-spin-button,
  &::-webkit-outer-spin-button {
    -webkit-appearance: none;
  }

}

/* UPLOAD */

[type="file"]::-webkit-file-upload-button {
  display: none;
}

/* INVALID */

::-moz-ui-invalid {
  box-shadow: none;
}

/* CLEAR ICON */

::-ms-clear {
  display: none;
}


// @optional ./vendor/normalize.scss

/* BORDER / iOS SHADOW */

textarea {
  border: 0;
  appearance: none;
  font-family: $font-family-root;
}


// @optional ./vendor/normalize.scss
// @optional ./border_color.scss
// @optional ./box_sizing.scss
// @optional ./flexbox.scss
// @optional ./fullscreen.scss
// @optional ./input.scss
// @optional ./no_outline.scss
// @optional ./placeholder.scss
// @optional ./selection.scss
// @optional ./table.scss
// @optional ./textarea.scss
// @optional ./touch_action.scss

/* HTML */

html {
  height: 100%;
  font-size: $font-size;
  -webkit-tap-highlight-color: transparent;
  -webkit-touch-callout: none;
}

/* BODY */

body {
  @include color-inline ( $body-color, 'base' );
  font-family: $font-family-root;
  font-size: 1rem;
  line-height: $line-height;
  height: 100%;
}


body {
  user-select: none !important;
}

body,
input,
textarea {
  font-family: $font-family;
  font-size: $font-size;
}


/* WIDGET */

%widget {
  @include last-child-no-gutter ();
  position: relative;
  margin: 0 0 $gutter;
}

.widget {
  @extend %widget;
}


/* Z-INDEX */

.layout-priority-z-index {

  user-select: none !important;
  cursor: move !important;

  %layout-priority-z-index-provider {
    z-index: unset;
  }

}

.priority-z-index {
  z-index: $priority-z-index !important;
}


/* ACTIONABLE */

%actionable {
  touch-action: manipulation;
  cursor: pointer;
}

.actionable {
  @extend %actionable;
}


/* ANIMATIONS */

@each $animation, $duration in $animations {

  $class: animation-get-class( $animation );

  .#{$class} {
    transition-duration: $duration !important;
  }

}


/* BORDER RADIUS */

.sharp {
  border-radius: $sharp-border-radius !important;
}

.rounded {
  border-radius: $rounded-border-radius !important;
}

.circular {
  border-radius: $circular-border-radius !important;
}


/* BORDERED */

.bordered {
  border-width: $border-width;
  border-style: $border-style;
}


// @require ../bordered.scss

/* COLORS */

@each $name, $datas in $colors {

  @if index( $bordered-colors, $name ) {

    $class: color-get-class( $name );

    $bg: nth( $datas, 1 );

    .border-#{$class} {
      border-color: $bg !important;
    }

  }

}


/* COLORS */

@each $name, $datas in $colors {

  $class: color-get-class( $name );

  $bg: nth( $datas, 1 );
  $bg-hover: nth( $datas, 2 );
  $bg-active: nth( $datas, 3 );
  $border: nth( $datas, 4 );
  $text: nth( $datas, 6 );

  %color-#{$name}-base {
    background-color: $bg;
    border-color: $border;
    color: $text;
  }

  %color-#{$name}-hover {
    background-color: $bg-hover;
  }

  %color-#{$name}-active {
    background-color: $bg-active;
  }

  %color-#{$name} {

    @extend %color-#{$name}-base;

    &.hover {
      @extend %color-#{$name}-hover;
    }

    &.active {
      @extend %color-#{$name}-active;
    }

  }

  .#{$class} {
    @extend %color-#{$name};
  }

}


// @require ../actionable.scss
// @require decorators/colors/colors.scss

/* COLORS */

@each $name, $datas in $colors {

  @if index( $actionable-colors, $name ) and $name != 'inherit' and $name != 'transparent' {

    %color-#{$name}%actionable:not(.disabled) {

      &:not(.active):hover {
        @if $svelto-development { // For performance reasons
          @include color-inline ( $name, 'hover' );
        } @else {
          @extend %color-#{$name}-hover;
        }
      }

      &:not(.ripple):active {
        @if $svelto-development { // For performance reasons
          @include color-inline ( $name, 'active' );
        } @else {
          @extend %color-#{$name}-active;
        }
      }

    }

  }

}


// @require ../colors.scss

/* INVERTED */

@each $name, $datas in $colors {

  @if index( $inverted-colors, $name ) and $name != 'inherit' and $name != 'transparent' {

    $bg: nth( $datas, 1 );
    $bg-hover: nth( $datas, 2 );
    $bg-active: nth( $datas, 3 );
    $border: nth( $datas, 4 );
    $text: nth( $datas, 6 );

    %color-#{$name}-inverted {
      background-color: $text;
      border-color: $bg;
      color: $bg;
    }

    %color-#{$name}-inverted-hover {
      background-color: $bg-hover;
      border-color: $bg;
      color: $text;
    }

    %color-#{$name}-inverted-active {
      background-color: $bg-active;
      border-color: $bg;
      color: $text;
    }

    %color-#{$name}.inverted {

      @extend %color-#{$name}-inverted;

      &.hover {
        @extend %color-#{$name}-inverted-hover;
      }

      &.active {
        @extend %color-#{$name}-inverted-active;
      }

    }

  }

}


// @require ../colors.scss
// @require decorators/colors/inverted/inverted.scss

/* INVERTED */

@each $name, $datas in $colors {

  @if index( $actionable-inverted-colors, $name ) and $name != 'inherit' and $name != 'transparent' {

    %color-#{$name}%actionable.inverted:not(.disabled) {

      &:not(.active):hover {
        @extend %color-#{$name}-inverted-hover;
      }

      &:not(.ripple):active {
        @extend %color-#{$name}-inverted-active;
      }

    }

  }

}


// @require ../colors.scss

/* TEXT */

@each $name, $datas in $colors {

  @if index( $text-colors, $name ) {

    $class: color-get-class( $name );

    $bg: nth( $datas, 1 );

    .text-#{$class} {
      color: $bg !important;
    }

  }

}


/* DISABLED */

//FIXME: Are we sure this is the best/cleanest way to implement it?
// In order to always animate the opacity transition

* {
  transition: opacity $disabled-animation-duration;
}

.disabled,
[disabled] {

  pointer-events: none !important;
  opacity: $disabled-opacity !important;

  &,
  &:before,
  &:after,
  *,
  :before,
  :after {
    cursor: default !important;
    animation-play-state: paused !important;
  }

}


// @optional core/multiple/multiple.scss

/* FLUID */

.fluid {

  /* NOT MULTIPLE */

  &:not(.multiple) {
    width: 100%;
    max-width: 100%;
    flex: 1 1 auto;
  }

  /* MULTIPLE */

  &.multiple {

    flex-grow: 1;

    &:not(.vertical) > * {
      flex: 1 1 auto;
    }

    &.vertical > * {
      width: 100%;
      max-width: 100%;
    }

  }

}


// @optional core/multiple/multiple.scss

//TODO: Maybe rename it, limited is not very explicative of its purpose (restricting the width of an element to the setted limit)

/* LIMITED */

@include media-width-up ( $limited-width ) {

  .limited {

    /* BASIC */

    &:not(.multiple),
    &.multiple.no-wrap,
    &.multiple.vertical,
    &.multiple.joined {
      max-width: $limited-width;
    }

    /* ADVANCED */

    &.multiple:not(.no-wrap):not(.vertical):not(.joined) {
      max-width: calc(#{$limited-width} + #{$gutter});
    }

  }

}


// @optional core/multiple/multiple.scss
// @optional decorators/limited/limited.scss

/* CENTERED */

.centered {

  /* NOT MULTIPLE */

  &:not(.multiple) {
    @include margin-x ( auto );
  }

  /* MULTIPLE */

  // If it's not `limited` there's no way it will be centered since as a `display: flex` it will take all the available space
  //TODO: Add support for advanced `multiple`

  @include media-width-up ( $limited-width ) {

    &.multiple.limited.no-wrap,
    &.multiple.limited.vertical,
    &.multiple.limited.joined {
      @include margin-x ( auto );
    }

  }

}


/* POINTING */

%pointing-tip {

  @include color ( $pointing-tip-color, $pointing-tip-color-force, $pointing-tip-color-basic );
  @include dimension ( $pointing-tip-size );
  transform: rotate(45deg);
  position: absolute;
  content: '';
  z-index: 1;
  box-sizing: content-box;
  border: inherit;

  /* BORDERED */

  &.bordered {
    border-width: $border-width;
  }

}

%pointing:after {
  @extend %pointing-tip;
}


// @require ../pointing.scss

/* HORIZONTAL */

%pointing-horizontal {

  @extend %pointing;

  /* TIP */

  &:after {
    top: 50%;
    transform: translateY(-50%) rotate(45deg);
  }

}


// @require ./horizontal.scss

/* LEFT */

%pointing-left-base {

  @extend %pointing-horizontal;

  /* TIP */

  &:after {
    left: - $pointing-tip-size-half;
    clip-path: url(#{$pointing-path-images}pointing-clips.svg#{$revision}#clip-left); // The polygon is not supported on Firefox
    clip-path: polygon(0 0, 100% 100%, 0 100%);
  }

  /* BORDERED */

  &.bordered:after {
    margin-left: - $border-width;
  }

}

%pointing-left-spaced {
  margin-left: $pointing-tip-diagonal-half;
}

%pointing-left {
  @extend %pointing-left-base;
  @extend %pointing-left-spaced;
}

/* CLIP-PATH SUPPORTED */

html.clip-path-polygon,
html.clip-path-url {

  .pointing-left {
    @extend %pointing-left;
  }

}


// @require ./horizontal.scss

/* RIGHT */

%pointing-right-base {

  @extend %pointing-horizontal;

  /* TIP */

  &:after {
    right: - $pointing-tip-size-half;
    clip-path: url(#{$pointing-path-images}pointing-clips.svg#{$revision}#clip-right); // The polygon is not supported on Firefox
    clip-path: polygon(0 0, 100% 100%, 100% 0);
  }

  /* BORDERED */

  &.bordered:after {
    margin-right: - $border-width;
  }

}

%pointing-right-spaced {
  margin-right: $pointing-tip-diagonal-half;
}

%pointing-right {
  @extend %pointing-right-base;
  @extend %pointing-right-spaced;
}

/* CLIP-PATH SUPPORTED */

html.clip-path-polygon,
html.clip-path-url {

  .pointing-right {
    @extend %pointing-right;
  }

}


// @require ../pointing.scss

/* VERTICAL */

%pointing-vertical {

  @extend %pointing;

  /* TIP */

  &:after {
    left: 50%;
    transform: translateX(-50%) rotate(45deg);
  }

}


// @require ./vertical.scss

/* BOTTOM */

%pointing-bottom-base {

  @extend %pointing-vertical;

  /* TIP */

  &:after {
    bottom: - $pointing-tip-size-half;
    clip-path: url(#{$pointing-path-images}pointing-clips.svg#{$revision}#clip-bottom); // The polygon is not supported on Firefox
    clip-path: polygon(0 100%, 100% 100%, 100% 0);
  }

  /* BORDERED */

  &.bordered:after {
    margin-bottom: - $border-width;
  }

}

%pointing-bottom-spaced {

  margin-bottom: calc(#{$gutter} + #{$pointing-tip-diagonal-half});

  %multiple > & {
    margin-bottom: $gutter;
  }

}

%pointing-bottom {
  @extend %pointing-bottom-base;
  @extend %pointing-bottom-spaced;
}

/* CLIP-PATH SUPPORTED */

html.clip-path-polygon,
html.clip-path-url {

  .pointing-bottom {
    @extend %pointing-bottom;
  }

}


// @optional core/multiple/multiple.scss
// @require ./vertical.scss

/* TOP */

%pointing-top-base {

  @extend %pointing-vertical;

  /* TIP */

  &:after {
    top: - $pointing-tip-size-half;
    clip-path: url(#{$pointing-path-images}pointing-clips.svg#{$revision}#clip-top); // The polygon is not supported on Firefox
    clip-path: polygon(100% 0, 0 0, 0 100%);
  }

  /* BORDERED */

  &.bordered:after {
    margin-top: - $border-width;
  }

}

%pointing-top-spaced {

  margin-top: $pointing-tip-diagonal-half;

  %multiple > & {
    margin-top: 0; //FIXME: We cannot know that before it was 0
  }

}

%pointing-top {
  @extend %pointing-top-base;
  @extend %pointing-top-spaced;
}

/* CLIP-PATH SUPPORTED */

html.clip-path-polygon,
html.clip-path-url {

  .pointing-top {
    @extend %pointing-top;
  }

}


// @optional ./top.scss
// @optional ./right.scss
// @optional ./bottom.scss
// @optional ./left.scss

/* DEFAULT */

.pointing:not(.pointing-right):not(.pointing-bottom):not(.pointing-left) {
  @extend .pointing-top;
}


/* SIZES */

@each $size, $font-size in $sizes {

  $class: size-get-class( $size );

  %size-#{$size}-base {
    @include size-inline ( $size );
  }

  %size-#{$size} {
    @extend %size-#{$size}-base;
  }

  .#{$class} {
    @extend %size-#{$size};
  }

}


/* TARGET */

%target {
  animation: target $target-animation-duration ease-in-out;
  animation-iteration-count: $target-animation-iteration-count;
}

%targetable:target {
  @extend %target;
}

.target {
  @extend %target;
}


/* Z-DEPTHS */

@each $depth, $shadow in $z-depths {

  $class: z-depth-get-class( $depth );

  %z-depth-#{$depth}-base {
    @include z-depth-inline ( $depth );
  }

  %z-depth-#{$depth} {
    @extend %z-depth-#{$depth}-base;
  }

  .#{$class} {
    @extend %z-depth-#{$depth};
  }

}


// @require core/widget/widget.scss

/* CENTERER */

%centerer {
  @extend %widget;
  display: flex;
  justify-content: center;
  align-items: center;
}

.centerer {
  @extend %centerer;
}


// @require core/widget/widget.scss
// @require core/z_index/z_index.scss
// @require decorators/target/target.scss

// If we set is as `display: flex` then the padding-bottom will collpase when used as `overlay`

/* CONTAINER */

%container {
  @extend %widget;
  @extend %layout-priority-z-index-provider;
  border-radius: $container-border-radius;
  padding: $container-padding-y $container-padding-x;
  z-index: 0; // In order to better support actionable icons etc.
}

.container {
  @extend %container;
  @extend %targetable;
  @include color ( $container-color, $container-color-force, $container-color-basic );
}


// @optional core/multiple/multiple.scss
// @require decorators/target/target.scss
// @require widgets/container/container.scss

//TODO: Maybe use slimmer `.card-header` and `.card-footer`

/* CARD */

.card {

  @extend %widget;
  @extend %targetable;
  @include children-no-gutter ();
  @include color ( $card-color, $card-color-force, $card-color-basic );
  display: flex;
  border-radius: $card-border-radius;

  /* HEADER / BLOCK / FOOTER */

  &-header,
  &-block,
  &-footer {

    &:not(.multiple) {
      @extend %container;
      @include color ( $card-section-color, $card-section-color-force, $card-section-color-basic );
      border-radius: 0;
    }

    &.multiple > * {
      border-radius: 0;
      margin-bottom: 0 !important;
    }

  }

  /* HEADER / FOOTER */

  &-header,
  &-footer {
    flex-shrink: 0; // So that when there's an overflow just `.card-block` scrolls
  }

  /* BLOCK */

  &-block {
    flex: 1 1 auto; // IE-10/11 sets flex-shrink to 0
    overflow: auto;
  }

  /* BORDER RADIUS */

  > *,
  > .table {
    border-radius: 0;
  }

}


// @require ../card.scss

/* BORDERED */

.card.bordered {

  /* INSET BORDERED */

  > .bordered {

    margin-left: - $border-width;
    margin-right: - $border-width;

    /* FIRST / LAST */

    &:first-child:not(.overlay):not(.ripple-circle) {
      margin-top: - $border-width;
    }

    &:last-child {
      margin-bottom: - $border-width !important;
    }

  }

  > :first-child.overlay + .bordered,
  > :first-child.ripple-circle + .bordered {
    margin-top: - $border-width;
  }

}


// @require ../card.scss

/* HEADER / BLOCK / FOOTER */

.card-header,
.card-block,
.card-footer {

  &.compact:not(.multiple),
  .card.compact > &:not(.multiple) {
    padding: $card-compact-padding-y $card-compact-padding-x;
  }

}


// @require ../card.scss

/* HORIZONTAL */

.card.horizontal {

  flex-direction: row;

  /* BORDER RADIUS INHERITANCE */

  > :first-child:not(.overlay):not(.ripple-circle),
  > :first-child.overlay + *,
  > :first-child.ripple-circle + * {
    @include border-left-radius ( inherit );
  }

  > .multiple:first-child {

    > :first-child {
      border-top-left-radius: inherit;
      border-bottom-left-radius: inherit;
    }

  }

  > :last-child {
    @include border-right-radius ( inherit );
  }

  > .multiple:last-child {

    > :last-child {
      border-top-right-radius: inherit;
      border-bottom-right-radius: inherit;
    }

  }

  /* NEXT CHILDREN BORDERED */

  > .bordered + .bordered {

    &:not(.card-footer) {
      border-left-width: 0;
    }

    &.card-footer {
      margin-left: - $border-width;
    }

  }

}


// @require ../card.scss

/* VERTICAL */

.card.vertical {

  flex-direction: column;

  /* BORDER RADIUS INHERITANCE */

  > :first-child:not(.overlay):not(.ripple-circle),
  > :first-child.overlay + *,
  > :first-child.ripple-circle + * {
    @include border-top-radius ( inherit );
  }

  > .multiple:first-child {

    > :first-child {
      border-top-left-radius: inherit;
    }

    > :last-child {
      border-top-right-radius: inherit;
    }

  }

  > :last-child {
    @include border-bottom-radius ( inherit );
  }

  > .multiple:last-child {

    > :first-child {
      border-bottom-left-radius: inherit;
    }

    > :last-child {
      border-bottom-right-radius: inherit;
    }

  }

  /* NEXT CHILDREN BORDERED */

  > .bordered + .bordered {

    &:not(.card-footer) {
      border-top-width: 0;
    }

    &.card-footer {
      margin-top: - $border-width;
    }

  }

}


// @optional ./horizontal.scss
// @optional ./vertical.scss

/* DEFAULT */

.card:not(.vertical):not(.horizontal) {
  @extend .card.vertical;
}


// @require ../card.scss

//FIXME: Doesn't work properly inside a nested layout (shouldn't influence the parent layouts)

/* FULLSCREEN */

.card:not(.modal):not(.popover):not(.panel) {

  &.fullscreen,
  &.fullscreen-request {
    @include fill-fixed ();
    border-width: 0;
    border-radius: 0;
    margin: 0;
    max-width: none;
    max-height: none;
    width: 100% !important;
    height: 100% !important;
    z-index: $card-fullscreen-z-index !important;
  }

}


// @require ../container.scss

/* COMPACT */

.container.compact {
  padding: $container-compact-padding-y $container-compact-padding-x;
}


/* REVERTING */

.draggable-reverting {
  z-index: $priority-z-index !important;
  transition: transform $draggable-reverting-animation-duration !important;
}


.editor {
  user-select: text !important;
  font-size: $editor-font-size !important;
  line-height: $editor-line-height !important;
}


// @require core/reset/reset.scss

/* BUTTON */

button {
  border: 0;
  padding: 0;
}


// @require core/reset/reset.scss
// @require widgets/container/container.scss

/* FIELDSET */

fieldset {
  @extend %container;
  background-color: $fieldset-bg-color;
  border-color: $fieldset-border-color;
}


// @require core/widget/widget.scss

/* DEFAULT */

form {
  @extend %widget;
}


// @require core/reset/reset.scss
// @require core/widget/widget.scss

/* LABEL */

label {
  @extend %widget;
  display: block;
}


// @require core/reset/reset.scss

/* LEGEND */

legend {
  padding: 0 $gutter-half;
}


// @require core/reset/reset.scss
// @require core/widget/widget.scss

/* HEADER */

%header {
  @extend %widget;
  padding: $header-padding-y $header-padding-x;
}

header {
  @extend %header;
}


// @require core/reset/reset.scss
// @require widgets/header/header.scss

/* FOOTER */

footer {
  @extend %header;
}


@font-face {
  font-family: 'Material Icons';
  font-style: normal;
  font-weight: 400;
  font-display: block;
  src: url(#{$icon-path-fonts}IconFont.woff2#{$revision}) format('woff2');
}


// @require core/widget/widget.scss

/* ICON */

%icon-base {
  display: inline-block;
  vertical-align: middle;
  font-family: 'Material Icons';
  font-weight: normal;
  font-style: normal;
  font-size: 1em * $icon-scale-factor;
  width: 1em;
  height: 1em;
  line-height: 1;
  letter-spacing: normal;
  text-transform: none;
  word-wrap: normal;
  white-space: nowrap;
  direction: ltr;
  overflow: hidden; // So the text won't exceed the icon box even when the font is not loaded
  flex: 0 0 auto !important; // We don't want it to grow or shrink in any case
  -webkit-font-smoothing: antialiased;
  text-rendering: optimizeLegibility;
  -moz-osx-font-smoothing: grayscale;
  font-feature-settings: 'liga';
}

%icon {
  @extend %icon-base;
}

%icon-sizes-scaled {

  @each $size, $font-size in $sizes {

    $class: size-get-class( $size );

    &.#{$class} {
      font-size: $font-size * $icon-scale-factor;
    }

  }

}

i.icon {
  @extend %widget;
  @extend %icon;
  @extend %icon-sizes-scaled;
}


// @require ../icon.scss

//FIXME: Once clicked it makes the header behave weirdly (ios safari)

/* ACTIONABLE */

%icon-actionable {

  /* ENABLED */

  &:not(.disabled) {

    /* HOVER / ACTIVE */

    &.hover,
    &:hover,
    &.active,
    &:active {

      overflow: visible;

      &:before {
        @include center-transform ();
        @include dimension ( $icon-actionable-before-size );
        position: absolute;
        z-index: -1;
        content: '';
        background-color: $icon-actionable-before-bg-color;
        border-radius: $icon-actionable-before-border-radius;
      }

    }

    /* HOVER */

    &:not(.active) {

      &.hover:before,
      &:hover:before {
        opacity: $icon-actionable-before-hover-opacity;
      }

    }

    /* ACTIVE */

    &:not(.ripple) {

      &.active:before,
      &:active:before {
        opacity: $icon-actionable-before-active-opacity;
      }

    }

  }

}

i.icon.actionable {
  @extend %icon-actionable;
}


// @require core/reset/reset.scss
// @require core/widget/widget.scss

//FIXME: `.multiple.no-wrap > img * 3` doesn't work

/* IMAGE */

img {

  @extend %widget;
  @include color ( $image-color, $image-color-force, $image-color-basic );
  display: block;
  max-width: 100%;
  height: auto;
  min-height: 1px; // It fixes a bug in IE11 where the images are stretched vertically

  /* INLINE */

  address &,
  p &,
  span & {
    display: inline-block;
  }

}


// @require widgets/container/container.scss

/* INFOBAR */

.infobar {

  @extend %container;
  @extend %targetable;
  @include children-no-gutter ();
  @include color ( $infobar-color, $infobar-color-force, $infobar-color-basic );
  display: flex;
  flex-wrap: wrap;
  align-items: center;

  /* SECTIONS GUTTER */

  > :not(:first-child):not(.infobar-title):not(.infobar-subtitle):not(.infobar-bottom) {
    margin-left: $gutter;
  }

  /* LEFT / RIGHT */

  &-left,
  &-right {
    flex-shrink: 0;
  }

  /* CENTER */

  &-center {
    flex: 1 1 0%; // IE-10/11 sets flex-shrink to 0 // IE-10/11 misinterpreter a unitless 0 flex-basis
  }

  /* BOTTOM */

  //FIXME: Cannot be used for not 100% or fixed width elements, or the .infobar will be bigger than needed (for instance take a look at `toast`)

  &-bottom {
    width: 100%;
    margin-top: $gutter;
  }

  /* TITLE / SUBTITLE */

  &-title,
  &-subtitle {
    margin-bottom: 0 !important;
  }

  /* TITLE */

  &-title {
    @include size ( $infobar-title-size, $infobar-title-size-force, $infobar-title-size-basic );
  }

}


// @require ../infobar.scss

/* INSET */

.infobar.inset {
  padding: 0;
}


// @require core/reset/reset.scss
// @require core/widget/widget.scss
// @require decorators/target/target.scss

/* INPUT */

%input {
  @extend %widget;
  @extend %targetable;
  @include color ( $input-color, $input-color-force, $input-color-basic );
  display: flex;
  flex-shrink: 1;
  min-width: 0;
  border-radius: $input-border-radius;
  line-height: $line-height;
  padding: $input-padding-y $input-padding-x;
}

input {
  @extend %input;
}


// @require ../input.scss

/* COMPACT */

%input.compact {
  padding: $input-compact-padding-y $input-compact-padding-x;
}


// @require ../input.scss

/* FILE */

input[type="file"] {
  display: none !important;
}


// @require ../input.scss

/* INVALID */

%input.invalid {
  border-color: $color-error !important;
}


// @require ../input.scss

/* PLACEHOLDER */

::placeholder {
  color: rgba( if( color-exists( $input-color ), nth( map-get( $colors, $input-color ), 6 ), #212121 ), $input-placeholder-opacity );
}


// @require ../placeholder.scss
// @require decorators/colors/colors.scss

//TODO: Add support for inverted colors

/* COLORS */

@each $name, $datas in $colors {

  @if index( $input-placeholder-colors, $name ) and  $name != 'inherit' and $name != 'transparent' {

    $class: color-get-class( $name );

    $text: nth( $datas, 6 );

    %color-#{$class}::placeholder {
      color: rgba( $text, $input-placeholder-opacity );
    }

  }

}


// @require ../input.scss

/* VALID */

%input.valid {
  border-color: $color-success !important;
}


// @require core/widget/widget.scss
// @require decorators/target/target.scss
// @optional widgets/icon/icon.scss
// @optional widgets/icons/icons.scss

//TODO: Add a way to force labels icons to have the same height as labels with just text
//TODO: Add support for img inside it (It should probably behave like Angular Material's chip)

/* LABEL */

.label {

  @extend %widget;
  @extend %targetable;
  @include children-no-gutter ();
  @include color ( $label-color, $label-color-force, $label-color-basic );
  @include text-no-wrap ();
  font-weight: $label-font-weight;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  text-align: center;
  line-height: 1 * $icon-scale-factor;
  border-radius: $label-border-radius;
  padding: $label-padding-y $label-padding-x;
  min-width: $line-height-em + ( $label-padding-x * 2 ); // In order to always maintain a reasonable aspect ratio

  /* HORIZONTAL GUTTER */

  > :not(.overlay):not(.ripple-circle):not(input):not(select) {

    /* HORIZONTAL GUTTER */

    + * {
      margin-left: $label-inner-gutter;
    }

    + %icon {
      margin-left: $label-inner-gutter / $icon-scale-factor;
    }

  }

  /* ALIGNMENT */

  > %icon,
  > %icons,
  > :not(.overlay):not(.ripple-circle):first-child:not(:last-child),
  > :not(.overlay):not(.ripple-circle):first-child:not(:last-child) ~ *,
  > .overlay + :not(:last-child),
  > .ripple-circle + :not(:last-child) {
    vertical-align: middle;
  }

}


// @require decorators/actionable/actionable.scss
// @require widgets/label/label.scss

/* BUTTON */

.button {

  @extend %actionable;
  @extend .label;
  @include color ( $button-color, $button-color-force, $button-color-basic );

  /* CURSOR */

  > * {
    @extend %actionable;
  }

}


// @require ../label.scss

/* COMPACT */

.label.compact {

  padding: $label-compact-padding-y $label-compact-padding-x;
  min-width: $line-height-em + ( $label-compact-padding-x * 2 ); // In order to always maintain a reasonable aspect ratio

  /* CHILDREN */

  > :not(.overlay):not(.ripple-circle):not(input):not(select) {

    /* HORIZONTAL GUTTER */

    + * {
      margin-left: $label-compact-inner-gutter;
    }

    + %icon,
    + %icons {
      margin-left: $label-compact-inner-gutter / $icon-scale-factor;
    }

  }

}


// @require ../label.scss

/* INVALID */

.label.invalid {

  border-color: $color-error !important;

  /* ICON / ICONS */

  > %icon,
  > %icons {
    color: $color-error !important;
  }

}


// @require ../label.scss

/* VALID */

.label.valid {

  border-color: $color-success !important;

  /* ICON / ICONS */

  > %icon,
  > %icons {
    color: $color-success !important;
  }

}


// @require core/layout/layout.scss

/* LAYOUT RESIZABLE */

.layout.resizable {

  & > .sash {
    z-index: $layout-resizable-sash-z-index;
  }

}


// @require ../layout_resizable.scss

/* HORIZONTAL */

.layout.horizontal.resizable {

  &.sash-dragging {
    cursor: col-resize !important;
  }

  & > .sash {
    @include absolute ( 0 auto 0 auto );
    cursor: col-resize;
    width: $layout-resizable-sash-size;
    margin-left: - $layout-resizable-sash-size / 2;
    transform: translateX( - $layout-resizable-sash-size / 2 ); // Starting hidden
  }

}


// @require ../layout_resizable.scss

/* VERTICAL */

.layout.vertical.resizable {

  &.sash-dragging {
    cursor: row-resize !important;
  }

  & > .sash {
    @include absolute ( auto 0 auto 0 );
    cursor: row-resize;
    height: $layout-resizable-sash-size;
    margin-top: - $layout-resizable-sash-size / 2;
    transform: translateY( - $layout-resizable-sash-size / 2 ); // Starting hidden
  }

}


// @optional ./horizontal.scss
// @optional ./vertical.scss

/* DEFAULT */

.layout.resizable:not(.vertical):not(.horizontal) {
  @extend .layout.resizable.horizontal;
}


// @optional widgets/card/card.scss

/* MODAL */

.modal {
  @include center-transform ();
  @include z-depth ( $modal-z-depth, $modal-z-depth-force, $modal-z-depth-basic );
  position: fixed;
  z-index: $modal-z-index !important;
  max-width: $modal-max-width;
  max-height: $modal-max-height;
  margin: 0;
  transition: none; // Safari fix
  transition-property: transform, opacity;
  transition-duration: $modal-animation-duration;
}

/* BACKDROP */

.modal-backdrop {

  /* OBSCURED */

  &:before {
    position: fixed !important;
    cursor: pointer !important;
    z-index: $modal-z-index - 1 !important;
    transition-duration: $modal-animation-duration !important;
  }

}

/* VERTICAL SHRINKING FIX (IE-10/11) */

html.flexbox-tweener {

  .modal.card {

    max-height: none;

    > .card-block {
      max-height: $modal-max-height * .8;
    }

  }

}


// @require ../modal.scss

/* CLOSED */

.modal:not(.show) {
  display: none;
}

.modal:not(.open) {
  opacity: 0;
  transform: translate(-50%, -50%) translateY(#{$modal-closed-offset});
}


// @require ../modal.scss

//FIXME: Doesn't work properly inside a nested layout (shouldn't influence the parent layouts)

/* FULLSCREEN */

.modal.fullscreen,
.modal.fullscreen-request {
  border-width: 0;
  border-radius: 0;
  max-width: none;
  width: 100%;
  max-height: none;
  height: 100%;
}

/* VERTICAL SHRINKING FIX (IE-10/11) */

html.flexbox-tweener {

  .modal.fullscreen,
  .modal.fullscreen-request {

    /* CARD */

    &.card > .card-block {
      max-height: none;
    }

  }

}


/* CLOSED */

.popover:not(.show) {
  display: none;
}

.popover:not(.open) {
  opacity: 0;
  margin-top: $popover-closed-offset !important;
}


//TODO: Test a multi-level popover menu

/* POPOVER */

.popover {

  @include fixed ( 0 false false 0 );
  @include z-depth ( $popover-z-depth, $popover-z-depth-force, $popover-z-depth-basic );
  z-index: $popover-z-index !important;
  overflow: visible;
  max-width: $popover-max-width;
  margin: 0;
  transition: none; // Safari fix
  transition-property: opacity, margin-top;
  transition-duration: $popover-animation-duration;

  /* CARD */

  &.card {
    max-height: $popover-max-height;
  }

}

/* VERTICAL SHRINKING FIX (IE-10/11) */

html.flexbox-tweener {

  .popover.card {

    max-height: none;

    > .card-block {
      max-height: $popover-max-height * .8;
    }

  }

}


// @require ../popover.scss

//FIXME: Doesn't work properly inside a nested layout (shouldn't influence the parent layouts)

/* FULLSCREEN */

.popover.fullscreen,
.popover.fullscreen-request {
  border-width: 0;
  border-radius: 0;
  max-width: none;
  width: 100%;
  max-height: none;
  height: 100%;
}

/* VERTICAL SHRINKING FIX (IE-10/11) */

html.flexbox-tweener {

  .popover.fullscreen,
  .popover.fullscreen-request {

    /* CARD */

    &.card > .card-block {
      max-height: none;
    }

  }

}


// @require ../popover.scss

/* MOVING */

.popover.moving {

  transition: transform $popover-animation-duration;

  /* TIP */

  &:after {
    transition: none; // Safari fix
    transition-property: left, top; //TODO: Animate `transform` instead (this might be tricky, since `transform` is used by `pointing` for centering the pointer)
    transition-duration: $popover-animation-duration;
  }

}


/* SELECT */

select {
  @include color ( $select-color, $select-color-force, $select-color-basic );
  font-family: $font-family-sans-serif;
}

/* OPTION */

option {
  padding: $select-padding-y $select-padding-x;
}

/* OPTGROUP */

optgroup {

  font-style: normal;

  /* LABEL */

  &::before {
    padding: $select-padding-y $select-padding-x;
  }

  /* OPTION */

  option {
    padding: $select-padding-y $select-padding-x $select-padding-y ( $select-padding-x * 3 );
  }

}


// @optional ./native.scss
// @require core/reset/reset.scss
// @require core/widget/widget.scss
// @require widgets/icon/icon.scss

//TODO: Add support for non-affixed select's popover

/* SELECT */

.select {

  @extend %widget;
  cursor: pointer;
  position: relative;

  /* LABEL */

  &.label {
    text-align: left;
  }

  /* SELECT */

  select {

    @include fill ();
    @include fill-absolute ();
    appearance: none;
    cursor: pointer;
    margin: 0 !important;
    opacity: 0;
    border: 0;
    border-radius: inherit;
    z-index: $select-z-index !important;

    /* BORDERED */

    //FIXME: Not stretching properly, at maximum it reached 100% width and height

    // .bordered > & {
    //   @include absolute ( - $border-width );
    // }

    /* LABEL */

    + label {

      padding-right: ( 1em * $icon-scale-factor ) + $select-inner-gutter;
      min-height: 1em * $icon-scale-factor;
      min-width: 1em * $icon-scale-factor;
      flex-grow: 1;
      cursor: pointer;

      /* EMPTY */

      &:empty {
        padding-right: 0;
      }

      /* AFTER */

      &:after {
        @extend %icon-base;
        position: absolute;
        right: 0;
        top: 0; //Ensuring it won't wrap
        content: $select-icon-closed;
      }

      /* CUSTOM AFTER */

      &[data-icon]:after {
        content: attr(data-icon);
      }

      &[data-icon-closed]:after {
        content: attr(data-icon-closed);
      }

    }

  }

  /* OPEN */

  &.open {

    /* LABEL */

    select + label {

      /* AFTER */

      &:after {
        content: $select-icon-open;
      }

      /* CUSTOM AFTER */

      &[data-icon]:after {
        content: attr(data-icon);
      }

      &[data-icon-open]:after {
        content: attr(data-icon-open);
      }

    }

  }

}


// @require ../select.scss

/* BOTTOM */

.select.popover-anchor-bottom {
  @include border-bottom-radius ( 0 );
}


// @require ../select.scss

/* LEFT */

.select.popover-anchor-left {
  @include border-left-radius ( 0 );
}


// @require ../select.scss

/* RIGHT */

.select.popover-anchor-right {
  @include border-right-radius ( 0 );
}


// @require ../select.scss

/* TOP */

.select.popover-anchor-top {
  @include border-top-radius ( 0 );
}


// @require ../select.scss

/* INVALID */

.select.invalid > label,
select.invalid + label,
select + label.invalid {

  /* AFTER */

  &:after {
    color: $color-error !important;
  }

}


// @optional widgets/card/card.scss
// @require ../select.scss

/* POPOVER */

.select-popover {

  @include z-depth ( $select-popover-z-depth, $select-popover-z-depth-force, $select-popover-z-depth-basic );

  /* CARD BLOCK */

  .card-block {
    padding: $gutter-half 0;
  }

  /* BUTTON */

  .button {
    display: block;
    border-radius: 0;
    margin-bottom: 0;
    text-align: left;
  }

  /* DIVIDER */

  .divider {
    margin-top: $gutter-half;
  }

}


// @require ../select.scss

/* VALID */

.select.valid > label,
select.valid + label,
select + label.valid {

  /* AFTER */

  &:after {
    color: $color-success !important;
  }

}


// @require core/widget/widget.scss

/* SPACER */

.spacer {
  @extend %widget;
  flex: 1 1 auto !important; // IE-10/11 sets flex-shrink to 0
  margin: 0 !important;
}


// @require core/multiple/multiple.scss
// @require widgets/container/container.scss

/* TAGBOX */

.tagbox {

  @extend %container;
  @include color ( $tagbox-color, $tagbox-color-force, $tagbox-color-basic );

  /* TAGS */

  &-tags {

    @extend %multiple;
    @include last-child-no-gutter ( 0, - $gutter );
    @include margin-x ( - $gutter-half );
    display: flex;
    flex-wrap: wrap;

    /* CHILDREN */

    > .tagbox-tag,
    > .tagbox-partial {
      @include margin-x ( $gutter-half );
      white-space: nowrap;
      z-index: 0; // Needed by `i.icon.actionable`
    }

  }

  /* PARTIAL */

  input.tagbox-partial {
    @include color ( 'inherit', true, true );
    margin-bottom: $gutter;
    min-width: $tagbox-partial-min-width;
  }

}


.tagbox {

  padding: 0 !important;

  &-partial {

    margin: 0 !important;

    .popover & {
      min-width: 100% !important;
      width: 6.5em;
    }

  }

}


/* CLOSER */

[class$="-closer"],
[class*="-closer "] {

  /* ENABLED */

  &:not(.disabled) {
    cursor: pointer;
  }

}


/* OPENER */

[class$="-opener"],
[class*="-opener "] {

  /* ENABLED */

  &:not(.disabled) {
    cursor: pointer;
  }

}


/* TOGGLER */

[class$="-toggler"],
[class*="-toggler "] {

  /* ENABLED */

  &:not(.disabled) {
    cursor: pointer;
  }

}


// @require core/reset/reset.scss
// @require widgets/input/input.scss

/* TEXTAREA */

textarea {
  @extend %input;
  resize: vertical;
}


// @require ../textarea.scss

/* UNRESIZABLE */

textarea.unresizable {
  resize: none;
}


// @require ../unresizable/unresizable.scss

/* DISABLED */

textarea[disabled],
textarea.disabled,
.disabled textarea {
  @extend textarea.unresizable;
}


/* OPACIFY */

@each $name, $datas in $colors {

  @if index( $toast-colors, $name ) and $name != 'inherit' and $name != 'transparent' {

    $bg: nth( $datas, 1 );
    $bg-hover: nth( $datas, 2 );
    $bg-active: nth( $datas, 3 );

    $bg-opacified: rgba( $bg, $toast-bg-opacity );
    $bg-opacified-hover: rgba( $bg-hover, $toast-bg-opacity );
    $bg-opacified-active: rgba( $bg-active, $toast-bg-opacity );

    @if opacity( $bg ) != opacity( $bg-opacified ) {

      .toast%color-#{$name} {
        background-color: $bg-opacified;
      }

    }

    @if opacity( $bg-hover ) != opacity( $bg-opacified-hover ) {

      .toast%color-#{$name}.hover,
      .toast%color-#{$name}%actionable:not(.active):hover {
        background-color: $bg-opacified-hover;
      }

    }

    @if opacity( $bg-active ) != opacity( $bg-opacified-active ) {

      .toast%color-#{$name}.active,
      .toast%color-#{$name}%actionable:not(.ripple):active {
        background-color: $bg-opacified-active;
      }

    }

  }

}


// @require widgets/infobar/infobar.scss

//TODO: Push up `FAB` if needed
//TODO: Make toast scrollables, maybe, so that in no case they will fill up the entire screen
//TODO: Maybe switch to an equally good but faster to compute animation

/* TOAST */

.toast {

  @include children-no-gutter ();
  @include z-depth ( $toast-z-depth, $toast-z-depth-force, $toast-z-depth-basic );
  display: block;
  border-radius: $toast-border-radius;
  pointer-events: auto;
  transition: none; // Safari fix
  transition-property: border-radius, border-width, opacity, filter, box-shadow, font-size, padding, margin;
  transition-duration: $toast-animation-duration;
  transform: translateZ(0);

  /* IMG */

  &-img {
    width: $toast-img-size;
    border-radius: if( $toast-img-rounded, $circular-border-radius, $toast-border-radius );
  }

  /* BUTTONS */

  &-buttons {
    @include padding-x ( $gutter );
  }

  /* INFOBAR */

  > .infobar {
    transition: padding $toast-animation-duration;
  }

}

/* HORIZONTAL GROW FIX (IE-10/11)*/

html.flexbox-tweener {

  .toast {

    > .infobar {

      flex-wrap: nowrap;

      .infobar-center {
        flex-basis: auto;
      }

    }

  }

}


.toast .infobar {
  padding: $toast-padding-y $toast-padding-x;
}


// @require ../toast.scss

/* CLOSED */

.toast:not(.open) {

  border-width: 0 !important;
  opacity: 0;
  font-size: 0;
  padding: 0;
  margin: 0;

  /* INFOBAR */

  > .infobar {
    padding: 0;
  }

}


// @require ../toast.scss

/* QUEUE */

.toast-queue {

  display: flex;

  /* LEFT */

  &.left {

    align-items: flex-start;

    &:not(:empty) {
      margin-left: $gutter;
    }

  }

  /* CENTER */

  &.center {

    @include margin-x ( $gutter );
    align-items: center;

    &:empty {
      @include margin-x ( $gutter-half );
    }

  }

  /* RIGHT */

  &.right {

    align-items: flex-end;

    &:not(:empty) {
      margin-right: $gutter;
    }

  }

  /* EXPANDED */

  &.expanded {
    @include toast-queue-expand ();
  }

}

/* COLUMNS SHRINKING FIX (IE-10/11)*/

html.flexbox-tweener {

  /* QUEUE */

  .toast-queue:not(.expanded):not(:empty) {

    flex: 1 1 0%;

    /* TOAST */

    .toast {
      max-width: 100%;
    }

  }

}


// @require ../toast.scss
// @require ../queue/queue.scss

/* QUEUES */

.toast-queues {

  @include fixed ( false 0 false 0 );
  z-index: $toast-queues-z-index !important;
  display: flex;
  flex-wrap: wrap;
  width: 100%;
  pointer-events: none;

  /* TOP */

  &.top {

    top: 0;

    /* STICKY HEADER */

    .layout.vertical > .layout-header.sticky ~ & {
      top: $layout-sticky-header-height;
    }

    /* ROW */

    .toast-queues-row {
      align-items: flex-start;
    }

    /* QUEUE */

    .toast-queue {

      flex-direction: column;

      /* TOAST */

      .toast {
        margin-top: $gutter;
      }

      /* EXPANDED */

      &.expanded .toast {
        border-top-width: 0;
        border-bottom-width: $border-width;
        border-bottom-style: solid;
      }

    }

  }

  /* BOTTOM */

  &.bottom {

    bottom: 0;

    /* ROW */

    .toast-queues-row {
      align-items: flex-end;
    }

    /* QUEUE */

    .toast-queue {

      flex-direction: column-reverse;

      /* TOAST */

      .toast {
        margin-bottom: $gutter;
      }

      /* EXPANDED */

      &.expanded .toast {
        border-bottom-width: 0;
        border-top-width: $border-width;
        border-top-style: solid;
      }

    }

  }

  /* ROW */

  &-row {
    display: flex;
    justify-content: space-between;
    width: 100%;
  }

}


// @require ../toast.scss
// @require ../queue/queue.scss
// @require ../queues/queues.scss

//TODO: Attach the shadow to `.toast-queues`, but only if there are some noties

/* AUTOEXPAND */

@include media-width-down ( $toast-autoexpand-width ) {

  /* QUEUES */

  .toast-queues {

    /* TOP */

    &.top {

      /* ROW */

      .toast-queues-row {
        flex-direction: column;
      }

      /* TOAST */

      .toast {
        border-top-width: 0;
        border-bottom-width: $border-width;
        border-bottom-style: solid;
      }

    }

    /* BOTTOM */

    &.bottom {

      /* ROW */

      .toast-queues-row {
        flex-direction: column-reverse;
      }

      /* TOAST */

      .toast {
        border-bottom-width: 0;
        border-top-width: $border-width;
        border-top-style: solid;
      }

    }

  }

  /* QUEUE */

  .toast-queue {
    @include toast-queue-expand ();
  }

}


.toolbar {

  @include center-flex ();
  overflow: hidden !important;
  padding: $gutter;

  &.layout-header,
  &:not(.layout-footer) {

    height: $toolbar-height;
    border-bottom-width: 1px;
    border-bottom-style: solid;

    input,
    .label,
    .button {
      padding: $toolbar-button-padding-y $toolbar-button-padding-x !important;
    }

  }

  html.mac &.layout-header {

    -webkit-app-region: drag;

    & > :not(.multiple):not(.title) {
      -webkit-app-region: no-drag;
    }

    & > .multiple > :not(.spacer) {
      -webkit-app-region: no-drag;
    }

  }

  &.layout-footer {
    border-top-width: 1px;
    border-top-style: solid;
  }

  &-semaphore-spacer {
    width: $toolbar-semaphore-width;
  }

}


// @require core/reset/reset.scss

//FIXME: There's a double border on Firefox Mobile
//TODO: Add a more advanced abbr, that triggers a tooltip, maybe even a pure CSS one
// We are separating the border property since the color may be `inherit`

/* ABBR */

abbr[title] {
  cursor: help;
  text-decoration: none;
  border-width: 0 0 $abbr-border-width;
  border-style: $abbr-border-style;
  border-color: $abbr-border-color;
}


// @require core/reset/reset.scss
// @require core/widget/widget.scss

/* ADDRESS */

address {
  @extend %widget;
  @include children-no-gutter ();
  font-style: $address-font-style;
}


// @require core/reset/reset.scss

/* CODE */

code {

  font-family: $code-font-family;
  background-color: $code-bg-color;
  padding: $code-padding-y $code-padding-x;
  border-radius: $code-border-radius;

  /* INSIDE PRE */

  pre > & {
    padding: 0;
    border: 0;
    background: transparent;
  }

}


// @require core/reset/reset.scss
// @require core/widget/widget.scss
// @require decorators/sizes/sizes.scss

/* HEADINGS */

h1,
h2,
h3,
h4,
h5,
h6 {

  @extend %widget;
  font-family: $heading-font-family;
  font-weight: $heading-fond-weight;

  /* SMALL */

  > small {
    opacity: $heading-small-opacity;
  }

}

h1 {
  @include size ( $h1-size, $heading-size-force, $heading-size-basic );
}

h2 {
  @include size ( $h2-size, $heading-size-force, $heading-size-basic );
}

h3 {
  @include size ( $h3-size, $heading-size-force, $heading-size-basic );
}

h4 {
  @include size ( $h4-size, $heading-size-force, $heading-size-basic );
}

h5 {
  @include size ( $h5-size, $heading-size-force, $heading-size-basic );
}

h6 {
  @include size ( $h6-size, $heading-size-force, $heading-size-basic );
}


// @require core/reset/reset.scss
// @require decorators/actionable/actionable.scss

//TODO: Make it more visually appealing
//TODO: Add support for automatic color selection

/* LINK */

a {

  @include actionable-inline ();
  @include text-wrap ();
  color: inherit;
  text-decoration: none;

  /* STYLE */

  // Elsewhere this might be an unwanted style

  p &,
  li &,
  th &,
  td &,
  address & {

    @include color-link ( $link-color, $link-color-force, $link-color-basic );

    &:hover {
      text-decoration: underline;
    }

  }

}


// @require ../link.scss

/* COLORS */

@each $name, $datas in $colors {

  @if ( index( $link-colors, $name ) and $name != 'transparent' ) {

    $class: color-link-get-class( $name );

    $bg: nth( $datas, 1 );
    $bg-hover: nth( $datas, 2 );
    $bg-active: nth( $datas, 3 );

    %color-#{$name}-link-base {

      color: $bg;

      &:hover {
        color: $bg-hover;
      }

      &:active {
        color: $bg-active;
      }

    }

    %color-#{$name}-link {
      @extend %color-#{$name}-link-base;
    }

    .#{$class} {
      @extend %color-#{$name}-link;
    }

  }

}


// @require core/reset/reset.scss
// @require core/widget/widget.scss

//TODO: Add support for horizontal lists

/* LISTS */

ul,
ol,
dl {
  @extend %widget;
  padding-left: $list-padding-left;
}

dd {
  margin: 0;
  padding-left: $list-padding-left;
}

/* NESTED OL */

ol ol {
  list-style-type: upper-roman;
}


// @require ../lists.scss

/* NO BULLET */

ul.no-bullet {
  padding-left: 0;
  list-style-type: none;
}


// @require core/reset/reset.scss

/* MARK */

mark {
  background-color: $mark-bg-color;
  padding: $mark-padding-y $mark-padding-x;
  border-radius: $mark-border-radius;
}


// @require core/reset/reset.scss
// @require core/widget/widget.scss

/* PARAGRAPH */

p {
  @extend %widget;
  @include children-no-gutter ();
  @include text-wrap ();
  max-width: 100%; // This fixes a bug in IE10 where it may not wrap and contain the entire text all in one line
  word-wrap: break-word;
}


// @require core/reset/reset.scss
// @require core/widget/widget.scss
// @require decorators/target/target.scss

/* PRE */

pre {
  @extend %widget;
  @extend %targetable;
  display: flex;
  padding: $pre-padding-y $pre-padding-x;
}


// @require core/reset/reset.scss

/* SAMP */

samp {
  font-family: $samp-font-family;
}


// @require core/reset/reset.scss

/* SMALL */

small {
  font-size: $small-font-size;
}


// @require core/reset/reset.scss

/* SPAN */

span {
  @include children-no-gutter ();
}


.wobble {
  animation: wobble $wobble-animation-duration both;
}


//TODO: Reorganize this

.popover-note-attachments,
.popover-note-tags {
  min-width: 6.5em;
}


@mixin theme-background-color ( $base, $hover: false, $active: false ) {

  background-color: $base;

  @if $hover {
    &:not(.active):hover {
      background-color: $hover;
    }
  }

  @if $active {
    &.active,
    &:active {
      background-color: $active;
    }
  }

}

@mixin theme-color ( $base, $hover: false, $active: false ) {

  color: $base;

  @if $hover {
    &:hover {
      color: $hover;
    }
  }

  @if $active {
    &:active {
      color: $active;
    }
  }

}

@mixin theme-color-full ( $name, $bg, $bg-hover, $bg-active, $border, $color ) {

  /* NORMAL */

  $selectors_normal: 'input, textarea, .label, .container, .card, .tagbox';
  $selectors_normal: if( $name, selector-unify( $selectors_normal, '.#{$name}' ), $selectors_normal );

  #{$selectors_normal} {
    background-color: $bg;
    color: $color;
    border-color: $border;
  }

  /* ACTIONABLE */

  $selectors_actionable: '.button';
  $selectors_actionable: if( $name, selector-unify( $selectors_actionable, '.#{$name}' ), $selectors_actionable );

  #{$selectors_actionable} {
    @include theme-background-color ( $bg, $bg-hover, $bg-active );
    color: $color;
    border-color: $border;
  }

  /* TEXT */

  @if $name {

    .text-#{$name} {
      color: $bg;
    }

  }

}


// @require ./abstract.scss

@mixin theme-color-accent ( $theme ) {

  $bg: map-get( $theme, 'accent.background' );
  $bg-hover: map-get( $theme, 'accent.backgroundHover' );
  $bg-active: map-get( $theme, 'accent.backgroundActive' );
  $border: map-get( $theme, 'accent.border' );
  $color: map-get( $theme, 'accent.foreground' );

  @include theme-color-full( 'accent', $bg, $bg-hover, $bg-active, $border, $color );

}


// @require ./abstract.scss

@mixin theme-color-base ( $theme ) {

  $bg: map-get( $theme, 'base.background' );
  $bg-hover: map-get( $theme, 'base.backgroundHover' );
  $bg-active: map-get( $theme, 'base.backgroundActive' );
  $border: map-get( $theme, 'base.border' );
  $color: map-get( $theme, 'base.foreground' );

  @include theme-color-full( false, $bg, $bg-hover, $bg-active, $border, $color );

}


// @require ./abstract.scss

@mixin theme-color-highlight ( $theme ) {

  $bg: map-get( $theme, 'highlight.background' );
  $bg-hover: map-get( $theme, 'highlight.backgroundHover' );
  $bg-active: map-get( $theme, 'highlight.backgroundActive' );
  $border: map-get( $theme, 'highlight.border' );
  $color: map-get( $theme, 'highlight.foreground' );

  @include theme-color-full( 'highlight', $bg, $bg-hover, $bg-active, $border, $color );

}


// @require ./abstract.scss

@mixin theme-color-warning ( $theme ) {

  $bg: map-get( $theme, 'warning.background' );
  $bg-hover: map-get( $theme, 'warning.backgroundHover' );
  $bg-active: map-get( $theme, 'warning.backgroundActive' );
  $border: map-get( $theme, 'warning.border' );
  $color: map-get( $theme, 'warning.foreground' );

  @include theme-color-full( 'warning', $bg, $bg-hover, $bg-active, $border, $color );

}


@mixin theme-core-body ( $theme ) {

  body {
    background-color: map-get( $theme, 'body.background' );
    color: map-get( $theme, 'body.foreground' );
  }

}


@mixin theme-core-input ( $theme ) {

  ::placeholder {
    color: rgba( map-get( $theme, 'base.foreground' ), .65 );
  }

}


@mixin theme-core-selection ( $theme ) {

  ::selection {
    background-color: map-get( $theme, 'selection.background' );
  }

}


@mixin theme-widget-column ( $theme ) {

  .layout.column {
    border-color: map-get( $theme, 'column.border' );
  }

}


@mixin theme-widget-editor ( $theme ) {

  .editor {
    background-color: map-get( $theme, 'editor.background' );
    border-color: map-get( $theme, 'editor.border' );
    color: map-get( $theme, 'editor.foreground' );
  }

}


@mixin theme-widget-highlighter ( $theme ) {

  pre {
    background-color: map-get( $theme, 'highlighter.background' );
    color: map-get( $theme, 'highlighter.foreground' );
  }

}


@mixin theme-widget-katex ( $theme ) {

  .katex {

    * {
      border-color: map-get( $theme, 'preview.foreground' );
    }

    .frac-line {
      border-color: map-get( $theme, 'preview.foreground' );
    }

  }

}


// @require themes/components/colors/abstract.scss

@mixin theme-widget-list ( $theme ) {

  .list-header {
    background-color: map-get( $theme, 'list.header.background' );
    border-color: map-get( $theme, 'list.header.border' );
    color: map-get( $theme, 'list.header.foreground' );
  }

  .list-item {

    $bg: map-get( $theme, 'list.item.background' );
    $bg-hover: map-get( $theme, 'list.item.backgroundHover' );
    $bg-active: map-get( $theme, 'list.item.backgroundActive' );

    @include theme-background-color ( $bg, $bg-hover, $bg-active );
    color: map-get( $theme, 'list.item.foreground' );
    border-color: map-get( $theme, 'list.item.border' );

  }

}


@mixin theme-widget-monaco ( $theme ) {

  .monaco-editor {

    .monaco-scrollable-element > .scrollbar > .slider,
    .minimap-slider .minimap-slider-horizontal {

      background: map-get( $theme, 'monaco.slider.background' ) !important;

      &:hover {
        background: map-get( $theme, 'monaco.slider.backgroundHover' ) !important;
      }

      &:active,
      .active {
        background: map-get( $theme, 'monaco.slider.backgroundActive' ) !important;
      }

    }

    .selected-text {

      background-color: map-get( $theme, 'monaco.selected.foreground' );

      &.focused {
        background-color: map-get( $theme, 'monaco.selected.focused.foreground' );
      }

    }

    .margin {
      background-color: map-get( $theme, 'monaco.margin.background' );
    }

    .line-numbers {
      color: map-get( $theme, 'monaco.lineNumber.foreground' );
    }

    .current-line ~ .line-numbers {
      color: map-get( $theme, 'monaco.currentLineNumber.foreground' );
    }

  }

}


// @require themes/components/colors/abstract.scss

@mixin theme-widget-notification ( $theme ) {

  $bg: map-get( $theme, 'notification.background' );
  $bg-hover: map-get( $theme, 'notification.backgroundHover' );
  $bg-active: map-get( $theme, 'notification.backgroundActive' );

  .toast {
    @include theme-background-color ( $bg, $bg-hover, $bg-active );
    border-color: map-get( $theme, 'notification.border' );
    color: map-get( $theme, 'notification.foreground' );
  }

}


// @require themes/components/colors/abstract.scss

@mixin theme-widget-popover ( $theme ) {

  .popover {

    .list-item {

      $bg: map-get( $theme, 'popover.list.item.background' );
      $bg-hover: map-get( $theme, 'popover.list.item.backgroundHover' );
      $bg-active: map-get( $theme, 'popover.list.item.backgroundActive' );

      @include theme-background-color ( $bg, $bg-hover, $bg-active );
      color: map-get( $theme, 'popover.list.item.foreground' );
      border-color: map-get( $theme, 'popover.list.item.border' );

    }

  }

}


// @require themes/components/colors/abstract.scss

@mixin theme-widget-preview ( $theme ) {

  .preview {

    background-color: map-get( $theme, 'preview.background' );
    border-color: map-get( $theme, 'preview.border' );
    color: map-get( $theme, 'preview.foreground' );

    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
      border-color: map-get( $theme, 'preview.heading.border' );
    }

    h1 {
      color: map-get( $theme, 'preview.h1.foreground' );
    }

    h2 {
      color: map-get( $theme, 'preview.h2.foreground' );
    }

    h3 {
      color: map-get( $theme, 'preview.h3.foreground' );
    }

    h4 {
      color: map-get( $theme, 'preview.h4.foreground' );
    }

    h5 {
      color: map-get( $theme, 'preview.h5.foreground' );
    }

    h6 {
      color: map-get( $theme, 'preview.h6.foreground' );
    }

    table th,
    table td {
      border-color: map-get( $theme, 'preview.table.border' );
    }

    table tr {
      background-color: map-get( $theme, 'preview.table.row.odd.background' );
    }

    table tr:nth-child(2n) {
      background-color: map-get( $theme, 'preview.table.row.even.background' );
    }

    code,
    p code,
    li code,
    table code {
      background-color: map-get( $theme, 'preview.code.background' ) !important;
      color: map-get( $theme, 'preview.code.foreground' ) !important;
    }

    pre code {
      background-color: transparent !important;
    }

    blockquote {
      color: map-get( $theme, 'preview.blockquote.foreground' );
      border-color: map-get( $theme, 'preview.blockquote.border' );
    }

    kbd {
      background-color: map-get( $theme, 'preview.kbd.background' );
      border-color: map-get( $theme, 'preview.kbd.border' );
      color: map-get( $theme, 'preview.kbd.foreground' );
      box-shadow: inset 0 -1px 0 map-get( $theme, 'preview.kbd.shadow' );
      border-bottom-color: map-get( $theme, 'preview.kbd.shadow' );
    }

    mark {
      background-color: map-get( $theme, 'preview.mark.background' );
      color: map-get( $theme, 'preview.mark.foreground' );
    }

    hr {
      background-color: map-get( $theme, 'preview.hr.background' );
    }

    h1 a,
    h2 a,
    h3 a,
    h4 a,
    h5 a,
    h6 a,
    p a,
    li a,
    th a,
    td a,
    dt a,
    dd a,
    address a {

      $color: map-get( $theme, 'preview.link.foreground' );
      $color-hover: map-get( $theme, 'preview.link.foregroundHover' );
      $color-active: map-get( $theme, 'preview.link.foregroundActive' );

      @include theme-color ( $color, $color-hover, $color-active );

    }

  }

}


// @require themes/components/colors/abstract.scss

@mixin theme-widget-quick-panel ( $theme ) {

  .quick-panel {

    .list-item {

      $bg: map-get( $theme, 'quickPanel.list.item.background' );
      $bg-hover: map-get( $theme, 'quickPanel.list.item.backgroundHover' );
      $bg-active: map-get( $theme, 'quickPanel.list.item.backgroundActive' );

      @include theme-background-color ( $bg, $bg-hover, $bg-active );
      color: map-get( $theme, 'quickPanel.list.item.foreground' );
      border-color: map-get( $theme, 'quickPanel.list.item.border' );

    }

  }

}


@mixin theme-widget-toolbar ( $theme ) {

  .toolbar {
    background-color: map-get( $theme, 'toolbar.background' );
    border-color: map-get( $theme, 'toolbar.border' );
    color: map-get( $theme, 'toolbar.foreground' );
  }

}


@mixin theme-window-main-mainbar ( $theme ) {

  .mainbar {
    background-color: map-get( $theme, 'mainbar.background' );
    color: map-get( $theme, 'mainbar.foreground' );
  }

}


// @require themes/components/colors/abstract.scss

@mixin theme-window-main-middlebar ( $theme ) {

  .middlebar {

    background-color: map-get( $theme, 'middlebar.background' );
    color: map-get( $theme, 'middlebar.foreground' );

    .list-item {

      $bg: map-get( $theme, 'middlebar.list.item.background' );
      $bg-hover: map-get( $theme, 'middlebar.list.item.backgroundHover' );
      $bg-active: map-get( $theme, 'middlebar.list.item.backgroundActive' );

      @include theme-background-color ( $bg, $bg-hover, $bg-active );
      color: map-get( $theme, 'middlebar.list.item.foreground' );
      border-color: map-get( $theme, 'middlebar.list.item.border' );

    }

    @if is-light( map-get( $theme, 'middlebar.background' ) ) != is-light( map-get( $theme, 'mainbar.background' ) ) {
      & + .layout.column {
        border-left-width: 0;
      }
    }

  }

}


// @require themes/components/colors/abstract.scss

@mixin theme-window-main-sidebar ( $theme ) {

  .sidebar {

    background-color: map-get( $theme, 'sidebar.background' );
    color: map-get( $theme, 'sidebar.foreground' );

    .list-item {

      $bg: map-get( $theme, 'sidebar.list.item.background' );
      $bg-hover: map-get( $theme, 'sidebar.list.item.backgroundHover' );
      $bg-active: map-get( $theme, 'sidebar.list.item.backgroundActive' );

      @include theme-background-color ( $bg, $bg-hover, $bg-active );
      color: map-get( $theme, 'sidebar.list.item.foreground' );
      border-color: map-get( $theme, 'sidebar.list.item.border' );

    }

    @if is-light( map-get( $theme, 'sidebar.background' ) ) != is-light( map-get( $theme, 'middlebar.background' ) ) {
      & + .layout.column {
        border-left-width: 0;
      }
    }

  }

}


// @require ./sidebar.scss
// @require ./middlebar.scss
// @require ./mainbar.scss

@mixin theme-window-main ( $theme ) {

  @include theme-window-main-sidebar ( $theme );
  @include theme-window-main-middlebar ( $theme );
  @include theme-window-main-mainbar ( $theme );

}


// @require ./components/core/body.scss
// @require ./components/core/input.scss
// @require ./components/core/selection.scss
// @require ./components/colors/base.scss
// @require ./components/colors/accent.scss
// @require ./components/colors/warning.scss
// @require ./components/colors/highlight.scss
// @require ./components/widgets/column.scss
// @require ./components/widgets/editor.scss
// @require ./components/widgets/highlighter.scss
// @require ./components/widgets/katex.scss
// @require ./components/widgets/list.scss
// @require ./components/widgets/monaco.scss
// @require ./components/widgets/notification.scss
// @require ./components/widgets/popover.scss
// @require ./components/widgets/preview.scss
// @require ./components/widgets/quick_panel.scss
// @require ./components/widgets/toolbar.scss
// @require ./components/windows/main/main.scss

@mixin theme ( $name, $theme ) {

  .theme-#{$name} {

    @include theme-core-body ( $theme );
    @include theme-core-selection ( $theme );
    @include theme-core-input ( $theme );

    @include theme-color-base ( $theme );
    @include theme-color-accent ( $theme );
    @include theme-color-highlight ( $theme );
    @include theme-color-warning ( $theme );

    @include theme-widget-column ( $theme );
    @include theme-widget-editor ( $theme );
    @include theme-widget-highlighter ( $theme );
    @include theme-widget-katex ( $theme );
    @include theme-widget-list ( $theme );
    @include theme-widget-monaco ( $theme );
    @include theme-widget-notification ( $theme );
    @include theme-widget-popover ( $theme );
    @include theme-widget-preview ( $theme );
    @include theme-widget-quick-panel ( $theme );
    @include theme-widget-toolbar ( $theme );

    @include theme-window-main ( $theme );

  }

}


// @require ./abstract.scss

@function theme-dark () {

  $base-background: #363636;
  $base-background-hover: lighten( $base-background, 3 );
  $base-background-active: darken( $base-background, 3 );
  $base-border: darken( $base-background, 9 );
  $base-foreground: #F6F6F6;

  $accent-background: #EF6C00;
  $accent-background-hover: lighten( $accent-background, 3 );
  $accent-background-active: darken( $accent-background, 3 );
  $accent-border: darken( $accent-background, 9 );
  $accent-foreground: #F6F6F6;

  $highlight-background: lighten( $base-background, 3 );
  $highlight-background-hover: lighten( $highlight-background, 3 );
  $highlight-background-active: darken( $highlight-background, 3 );
  $highlight-border: darken( $highlight-background, 9 );
  $highlight-foreground: $base-foreground;

  $warning-background: #F44336;
  $warning-background-hover: lighten( $warning-background, 3 );
  $warning-background-active: darken( $warning-background, 3 );
  $warning-border: darken( $warning-background, 9 );
  $warning-foreground: #F6F6F6;

  $body-background: darken( $base-background, 3 );
  $body-foreground: $base-foreground;

  $selection-background: rgba( $accent-background, .2 );

  $sidebar-background: #0F0F0F;
  $sidebar-foreground: $base-foreground;

  $middlebar-background: #161616;
  $middlebar-foreground: $base-foreground;

  $mainbar-background: #0F0F0F;
  $mainbar-foreground: $base-foreground;

  $toolbar-background: #262626;
  $toolbar-border: #000000;
  $toolbar-foreground: #909090;

  $list-header-background: #1F1F1F;
  $list-header-border: $toolbar-border;
  $list-header-foreground: $toolbar-foreground;

  $list-item-background: transparent;
  $list-item-background-hover: rgba( #FFFFFF, .04 );
  $list-item-background-active: rgba( #FFFFFF, .08 );
  $list-item-border: rgba( #FFFFFF, .12 );
  $list-item-foreground: inherit;

  $sidebar-list-item-background: $list-item-background;
  $sidebar-list-item-background-hover: $list-item-background-hover;
  $sidebar-list-item-background-active: $list-item-background-active;
  $sidebar-list-item-border: $list-item-border;
  $sidebar-list-item-foreground: $list-item-foreground;

  $middlebar-list-item-background: $list-item-background;
  $middlebar-list-item-background-hover: $list-item-background-hover;
  $middlebar-list-item-background-active: $list-item-background-active;
  $middlebar-list-item-border: $list-item-border;
  $middlebar-list-item-foreground: $list-item-foreground;

  $popover-list-item-background: $base-background;
  $popover-list-item-background-hover: $base-background-hover;
  $popover-list-item-background-active: $base-background-active;
  $popover-list-item-border: $base-border;
  $popover-list-item-foreground: $base-foreground;

  $quick-panel-list-item-background: $base-background;
  $quick-panel-list-item-background-hover: $base-background-hover;
  $quick-panel-list-item-background-active: $base-background-active;
  $quick-panel-list-item-border: $base-border;
  $quick-panel-list-item-foreground: $base-foreground;

  $notification-background: $base-background;
  $notification-background-hover: $base-background-hover;
  $notification-background-active: $base-background-active;
  $notification-border: $base-border;
  $notification-foreground: $base-foreground;

  $column-border: $list-header-border;

  $editor-background: #1F1F1F;
  $editor-border: $column-border;
  $editor-foreground: $body-foreground;

  $preview-background: #1F1F1F;
  $preview-border: $column-border;
  $preview-foreground: $body-foreground;

  $preview-heading-border: #2F2F2F;
  $preview-h1-foreground: inherit;
  $preview-h2-foreground: inherit;
  $preview-h3-foreground: inherit;
  $preview-h4-foreground: inherit;
  $preview-h5-foreground: inherit;
  $preview-h6-foreground: #AFAFAF;
  $preview-code-background: #161616;
  $preview-code-foreground: inherit;
  $preview-link-foreground: #6796E6;
  $preview-link-foreground-hover: lighten( $preview-link-foreground, 3 );
  $preview-link-foreground-active: darken( $preview-link-foreground, 3 );
  $preview-table-border: #2F2F2F;
  $preview-table-row-odd-background: #1F1F1F;
  $preview-table-row-even-background: #232323;
  $preview-blockquote-foreground: #AFAFAF;
  $preview-blockquote-border: #3F3F3F;
  $preview-kbd-background: #4F4F4F;
  $preview-kbd-border: #565656;
  $preview-kbd-shadow: #5F5F5F;
  $preview-kbd-foreground: #F2F2F2;
  $preview-mark-background: $selection-background;
  $preview-mark-foreground: $preview-foreground;
  $preview-hr-background: #3F3F3F;

  $highlighter-background: $preview-code-background;
  $highlighter-foreground: $preview-code-foreground;

  $monaco-selected-foreground: rgba( $accent-background, .2 );
  $monaco-selected-focused-foreground: rgba( $accent-background, .2 );
  $monaco-slider-background: rgba( #FFFFFF, .15 );
  $monaco-slider-backgroundHover: rgba( #FFFFFF, .2 );
  $monaco-slider-backgroundActive: rgba( #FFFFFF, .1 );
  $monaco-margin-background: $editor-background;
  $monaco-lineNumber-foreground: #AFAFAF;
  $monaco-currentLineNumber-foreground: $monaco-lineNumber-foreground;

  @return (
    'body.background': $body-background,
    'body.foreground': $body-foreground,
    'selection.background': $selection-background,
    'base.background': $base-background,
    'base.backgroundHover': $base-background-hover,
    'base.backgroundActive': $base-background-active,
    'base.border': $base-border,
    'base.foreground': $base-foreground,
    'accent.background': $accent-background,
    'accent.backgroundHover': $accent-background-hover,
    'accent.backgroundActive': $accent-background-active,
    'accent.border': $accent-border,
    'accent.foreground': $accent-foreground,
    'highlight.background': $highlight-background,
    'highlight.backgroundHover': $highlight-background-hover,
    'highlight.backgroundActive': $highlight-background-active,
    'highlight.border': $highlight-border,
    'highlight.foreground': $highlight-foreground,
    'warning.background': $warning-background,
    'warning.backgroundHover': $warning-background-hover,
    'warning.backgroundActive': $warning-background-active,
    'warning.border': $warning-border,
    'warning.foreground': $warning-foreground,
    'column.border': $column-border,
    'sidebar.background': $sidebar-background,
    'sidebar.foreground': $sidebar-foreground,
    'sidebar.list.item.background': $sidebar-list-item-background,
    'sidebar.list.item.backgroundHover': $sidebar-list-item-background-hover,
    'sidebar.list.item.backgroundActive': $sidebar-list-item-background-active,
    'sidebar.list.item.border': $sidebar-list-item-border,
    'sidebar.list.item.foreground': $sidebar-list-item-foreground,
    'middlebar.background': $middlebar-background,
    'middlebar.foreground': $middlebar-foreground,
    'middlebar.list.item.background': $middlebar-list-item-background,
    'middlebar.list.item.backgroundHover': $middlebar-list-item-background-hover,
    'middlebar.list.item.backgroundActive': $middlebar-list-item-background-active,
    'middlebar.list.item.border': $middlebar-list-item-border,
    'middlebar.list.item.foreground': $middlebar-list-item-foreground,
    'mainbar.background': $mainbar-background,
    'mainbar.foreground': $mainbar-foreground,
    'popover.list.item.background': $popover-list-item-background,
    'popover.list.item.backgroundHover': $popover-list-item-background-hover,
    'popover.list.item.backgroundActive': $popover-list-item-background-active,
    'popover.list.item.border': $popover-list-item-border,
    'popover.list.item.foreground': $popover-list-item-foreground,
    'quickPanel.list.item.background': $quick-panel-list-item-background,
    'quickPanel.list.item.backgroundHover': $quick-panel-list-item-background-hover,
    'quickPanel.list.item.backgroundActive': $quick-panel-list-item-background-active,
    'quickPanel.list.item.border': $quick-panel-list-item-border,
    'quickPanel.list.item.foreground': $quick-panel-list-item-foreground,
    'list.header.background': $list-header-background,
    'list.header.border': $list-header-border,
    'list.header.foreground': $list-header-foreground,
    'list.item.background': $list-item-background,
    'list.item.backgroundHover': $list-item-background-hover,
    'list.item.backgroundActive': $list-item-background-active,
    'list.item.border': $list-item-border,
    'list.item.foreground': $list-item-foreground,
    'toolbar.background': $toolbar-background,
    'toolbar.border': $toolbar-border,
    'toolbar.foreground': $toolbar-foreground,
    'notification.background': $notification-background,
    'notification.backgroundHover': $notification-background-hover,
    'notification.backgroundActive': $notification-background-active,
    'notification.border': $notification-border,
    'notification.foreground': $notification-foreground,
    'editor.background': $editor-background,
    'editor.border': $editor-border,
    'editor.foreg round': $editor-foreground,
    'preview.background': $preview-background,
    'preview.border': $preview-border,
    'preview.foreground': $preview-foreground,
    'preview.heading.border': $preview-heading-border,
    'preview.h1.foreground': $preview-h1-foreground,
    'preview.h2.foreground': $preview-h2-foreground,
    'preview.h3.foreground': $preview-h3-foreground,
    'preview.h4.foreground': $preview-h4-foreground,
    'preview.h5.foreground': $preview-h5-foreground,
    'preview.h6.foreground': $preview-h6-foreground,
    'preview.code.background': $preview-code-background,
    'preview.code.foreground': $preview-code-foreground,
    'preview.link.foreground': $preview-link-foreground,
    'preview.link.foregroundHover': $preview-link-foreground-hover,
    'preview.link.foregroundActive': $preview-link-foreground-active,
    'preview.table.border': $preview-table-border,
    'preview.table.row.odd.background': $preview-table-row-odd-background,
    'preview.table.row.even.background': $preview-table-row-even-background,
    'preview.blockquote.foreground': $preview-blockquote-foreground,
    'preview.blockquote.border': $preview-blockquote-border,
    'preview.kbd.background': $preview-kbd-background,
    'preview.kbd.border': $preview-kbd-border,
    'preview.kbd.shadow': $preview-kbd-shadow,
    'preview.kbd.foreground': $preview-kbd-foreground,
    'preview.mark.background': $preview-mark-background,
    'preview.mark.foreground': $preview-mark-foreground,
    'preview.hr.background': $preview-hr-background,
    'highlighter.background': $highlighter-background,
    'highlighter.foreground': $highlighter-foreground,
    'monaco.selected.foreground': $monaco-selected-foreground,
    'monaco.selected.focused.foreground': $monaco-selected-focused-foreground,
    'monaco.slider.background': $monaco-slider-background,
    'monaco.slider.backgroundHover': $monaco-slider-backgroundHover,
    'monaco.slider.backgroundActive': $monaco-slider-backgroundActive,
    'monaco.margin.background': $monaco-margin-background,
    'monaco.lineNumber.foreground': $monaco-lineNumber-foreground,
    'monaco.currentLineNumber.foreground': $monaco-currentLineNumber-foreground
  );

}

@include theme ( 'dark', theme-dark() );


// @require ./abstract.scss

@function theme-light () {

  $base-background: #FFFFFF;
  $base-background-hover: darken( $base-background, 3 );
  $base-background-active: darken( $base-background, 6 );
  $base-border: darken( $base-background, 14.5 );
  $base-foreground: #1F1F1F;

  $accent-background: #EF6C00;
  $accent-background-hover: darken( $accent-background, 3 );
  $accent-background-active: darken( $accent-background, 6 );
  $accent-border: darken( $accent-background, 14.5 );
  $accent-foreground: #FFFFFF;

  $highlight-background: darken( $base-background, 6 );
  $highlight-background-hover: darken( $highlight-background, 9 );
  $highlight-background-active: darken( $highlight-background, 12 );
  $highlight-border: darken( $highlight-background, 20.5 );
  $highlight-foreground: $base-foreground;

  $warning-background: #F44336;
  $warning-background-hover: darken( $warning-background, 3 );
  $warning-background-active: darken( $warning-background, 6 );
  $warning-border: darken( $warning-background, 14.5 );
  $warning-foreground: #FFFFFF;

  $body-background: darken( $base-background, 3 );
  $body-foreground: $base-foreground;

  $selection-background: rgba( $accent-background, .15 );

  $sidebar-background: #20272C;
  $sidebar-foreground: #FFFFFF;

  $middlebar-background: $base-background;
  $middlebar-foreground: $base-foreground;

  $mainbar-background: $body-background;
  $mainbar-foreground: inherit;

  $toolbar-background: darken( $base-background, 4 );
  $toolbar-border: darken( $toolbar-background, 12 );
  $toolbar-foreground: #505050;

  $list-header-background: lighten( $toolbar-background, 1.5 );
  $list-header-border: lighten( $toolbar-border, 3 );
  $list-header-foreground: lighten( $base-foreground, 30 );

  $list-item-background: transparent;
  $list-item-background-hover: rgba( #000000, .04 );
  $list-item-background-active: rgba( #000000, .08 );
  $list-item-border: rgba( #000000, .12 );
  $list-item-foreground: inherit;

  $sidebar-list-item-background: transparent;
  $sidebar-list-item-background-hover: rgba( #000000, .2 );
  $sidebar-list-item-background-active: rgba( #000000, .4 );
  $sidebar-list-item-border: rgba( #000000, .6 );
  $sidebar-list-item-foreground: inherit;

  $middlebar-list-item-background: $list-item-background;
  $middlebar-list-item-background-hover: $list-item-background-hover;
  $middlebar-list-item-background-active: $list-item-background-active;
  $middlebar-list-item-border: $list-item-border;
  $middlebar-list-item-foreground: $list-item-foreground;

  $popover-list-item-background: $list-item-background;
  $popover-list-item-background-hover: $list-item-background-hover;
  $popover-list-item-background-active: $list-item-background-active;
  $popover-list-item-border: $list-item-border;
  $popover-list-item-foreground: $list-item-foreground;

  $quick-panel-list-item-background: $list-item-background;
  $quick-panel-list-item-background-hover: $list-item-background-hover;
  $quick-panel-list-item-background-active: $list-item-background-active;
  $quick-panel-list-item-border: $list-item-border;
  $quick-panel-list-item-foreground: $list-item-foreground;

  $notification-background: $sidebar-background;
  $notification-background-hover: darken( $notification-background, 3 );
  $notification-background-active: darken( $notification-background, 6 );
  $notification-border: darken( $notification-background, 12 );
  $notification-foreground: $sidebar-foreground;

  $column-border: $list-header-border;

  $editor-background: $middlebar-background;
  $editor-border: lighten( $column-border, 3 );
  $editor-foreground: $body-foreground;

  $preview-background: $middlebar-background;
  $preview-border: lighten( $column-border, 3 );
  $preview-foreground: $body-foreground;

  $preview-heading-border: #EAECEF;
  $preview-h1-foreground: inherit;
  $preview-h2-foreground: inherit;
  $preview-h3-foreground: inherit;
  $preview-h4-foreground: inherit;
  $preview-h5-foreground: inherit;
  $preview-h6-foreground: #6A737D;
  $preview-code-background: rgba( 27, 31, 35, .05 );
  $preview-code-foreground: inherit;
  $preview-link-foreground: #0366D6;
  $preview-link-foreground-hover: darken( $preview-link-foreground, 3 );
  $preview-link-foreground-active: darken( $preview-link-foreground, 6 );
  $preview-table-border: #DFE2E5;
  $preview-table-row-odd-background: #FFFFFF;
  $preview-table-row-even-background: #F6F8FA;
  $preview-blockquote-foreground: #6A737D;
  $preview-blockquote-border: #DFE2E5;
  $preview-kbd-background: #FAFBFC;
  $preview-kbd-border: #DFE2E5;
  $preview-kbd-shadow: #959DA5;
  $preview-kbd-foreground: #444D56;
  $preview-mark-background: $selection-background;
  $preview-mark-foreground: $preview-foreground;
  $preview-hr-background: #E1E4E8;

  $highlighter-background: #F6F8FA;
  $highlighter-foreground: $preview-foreground;

  $monaco-selected-foreground: rgba( $accent-background, .15 );
  $monaco-selected-focused-foreground: rgba( $accent-background, .15 );
  $monaco-slider-background: rgba( #000000, .15 );
  $monaco-slider-backgroundHover: rgba( #000000, .2 );
  $monaco-slider-backgroundActive: rgba( #000000, .25 );
  $monaco-margin-background: $editor-background;
  $monaco-lineNumber-foreground: #6A737D;
  $monaco-currentLineNumber-foreground: $monaco-lineNumber-foreground;

  @return (
    'body.background': $body-background,
    'body.foreground': $body-foreground,
    'selection.background': $selection-background,
    'base.background': $base-background,
    'base.backgroundHover': $base-background-hover,
    'base.backgroundActive': $base-background-active,
    'base.border': $base-border,
    'base.foreground': $base-foreground,
    'accent.background': $accent-background,
    'accent.backgroundHover': $accent-background-hover,
    'accent.backgroundActive': $accent-background-active,
    'accent.border': $accent-border,
    'accent.foreground': $accent-foreground,
    'highlight.background': $highlight-background,
    'highlight.backgroundHover': $highlight-background-hover,
    'highlight.backgroundActive': $highlight-background-active,
    'highlight.border': $highlight-border,
    'highlight.foreground': $highlight-foreground,
    'warning.background': $warning-background,
    'warning.backgroundHover': $warning-background-hover,
    'warning.backgroundActive': $warning-background-active,
    'warning.border': $warning-border,
    'warning.foreground': $warning-foreground,
    'column.border': $column-border,
    'sidebar.background': $sidebar-background,
    'sidebar.foreground': $sidebar-foreground,
    'sidebar.list.item.background': $sidebar-list-item-background,
    'sidebar.list.item.backgroundHover': $sidebar-list-item-background-hover,
    'sidebar.list.item.backgroundActive': $sidebar-list-item-background-active,
    'sidebar.list.item.border': $sidebar-list-item-border,
    'sidebar.list.item.foreground': $sidebar-list-item-foreground,
    'middlebar.background': $middlebar-background,
    'middlebar.foreground': $middlebar-foreground,
    'middlebar.list.item.background': $middlebar-list-item-background,
    'middlebar.list.item.backgroundHover': $middlebar-list-item-background-hover,
    'middlebar.list.item.backgroundActive': $middlebar-list-item-background-active,
    'middlebar.list.item.border': $middlebar-list-item-border,
    'middlebar.list.item.foreground': $middlebar-list-item-foreground,
    'mainbar.background': $mainbar-background,
    'mainbar.foreground': $mainbar-foreground,
    'popover.list.item.background': $popover-list-item-background,
    'popover.list.item.backgroundHover': $popover-list-item-background-hover,
    'popover.list.item.backgroundActive': $popover-list-item-background-active,
    'popover.list.item.border': $popover-list-item-border,
    'popover.list.item.foreground': $popover-list-item-foreground,
    'quickPanel.list.item.background': $quick-panel-list-item-background,
    'quickPanel.list.item.backgroundHover': $quick-panel-list-item-background-hover,
    'quickPanel.list.item.backgroundActive': $quick-panel-list-item-background-active,
    'quickPanel.list.item.border': $quick-panel-list-item-border,
    'quickPanel.list.item.foreground': $quick-panel-list-item-foreground,
    'list.header.background': $list-header-background,
    'list.header.border': $list-header-border,
    'list.header.foreground': $list-header-foreground,
    'list.item.background': $list-item-background,
    'list.item.backgroundHover': $list-item-background-hover,
    'list.item.backgroundActive': $list-item-background-active,
    'list.item.border': $list-item-border,
    'list.item.foreground': $list-item-foreground,
    'toolbar.background': $toolbar-background,
    'toolbar.border': $toolbar-border,
    'toolbar.foreground': $toolbar-foreground,
    'notification.background': $notification-background,
    'notification.backgroundHover': $notification-background-hover,
    'notification.backgroundActive': $notification-background-active,
    'notification.border': $notification-border,
    'notification.foreground': $notification-foreground,
    'editor.background': $editor-background,
    'editor.border': $editor-border,
    'editor.foreground': $editor-foreground,
    'preview.background': $preview-background,
    'preview.border': $preview-border,
    'preview.foreground': $preview-foreground,
    'preview.heading.border': $preview-heading-border,
    'preview.h1.foreground': $preview-h1-foreground,
    'preview.h2.foreground': $preview-h2-foreground,
    'preview.h3.foreground': $preview-h3-foreground,
    'preview.h4.foreground': $preview-h4-foreground,
    'preview.h5.foreground': $preview-h5-foreground,
    'preview.h6.foreground': $preview-h6-foreground,
    'preview.code.background': $preview-code-background,
    'preview.code.foreground': $preview-code-foreground,
    'preview.link.foreground': $preview-link-foreground,
    'preview.link.foregroundHover': $preview-link-foreground-hover,
    'preview.link.foregroundActive': $preview-link-foreground-active,
    'preview.table.border': $preview-table-border,
    'preview.table.row.odd.background': $preview-table-row-odd-background,
    'preview.table.row.even.background': $preview-table-row-even-background,
    'preview.blockquote.foreground': $preview-blockquote-foreground,
    'preview.blockquote.border': $preview-blockquote-border,
    'preview.kbd.background': $preview-kbd-background,
    'preview.kbd.border': $preview-kbd-border,
    'preview.kbd.shadow': $preview-kbd-shadow,
    'preview.kbd.foreground': $preview-kbd-foreground,
    'preview.mark.background': $preview-mark-background,
    'preview.mark.foreground': $preview-mark-foreground,
    'preview.hr.background': $preview-hr-background,
    'highlighter.background': $highlighter-background,
    'highlighter.foreground': $highlighter-foreground,
    'monaco.selected.foreground': $monaco-selected-foreground,
    'monaco.selected.focused.foreground': $monaco-selected-focused-foreground,
    'monaco.slider.background': $monaco-slider-background,
    'monaco.slider.backgroundHover': $monaco-slider-backgroundHover,
    'monaco.slider.backgroundActive': $monaco-slider-backgroundActive,
    'monaco.margin.background': $monaco-margin-background,
    'monaco.lineNumber.foreground': $monaco-lineNumber-foreground,
    'monaco.currentLineNumber.foreground': $monaco-currentLineNumber-foreground
  );

}

@include theme ( 'light', theme-light() );


.layout.column {

  overflow: hidden !important; /* Fixes a weird bug where the mainbar could actually be scrolled */

  & + .layout.column {
    border-left-width: 1px;
    border-left-style: solid;
  }

}


.monaco-editor-wrapper {
  padding: 0 !important;
  overflow: hidden !important; // Removes an extra scrollbar that's rendered on Windows
}

.monaco-editor {

  .current-line {
    border-width: 0 !important;
  }

  .overlayWidgets {
    display: none;
  }

  .slider,
  .decorationsOverviewRuler,
  .minimap-slider {
    will-change: auto !important; /* It causes some sharpness problems */
  }

  .view-lines {

    .mtk13 { //UGLY: This token shouldn't be hard-coded
      text-decoration: line-through;
      color: inherit;
    }

  }

}


.error-stack {
  background-color: transparent !important;
  overflow: auto;
  max-width: calc( 100vw - #{$gutter * 2});
}


.list-header {
  @include center-flex ();
  border-bottom-width: 1px;
  border-bottom-style: solid;
  height: $list-header-height;
  max-height: $list-header-height;
  flex-grow: 0;
  padding: $list-header-padding-y $list-header-padding-x;
  overflow: hidden !important;
}


.list-item {

  @include text-truncate ();
  height: $list-item-height;
  padding: $list-item-padding-y $list-item-padding-x;
  margin: 0 !important;
  border-radius: 0 !important;
  width: 100%;
  cursor: pointer;
  overflow: hidden !important;
  justify-content: left;
  z-index: 0;

  > * {
    margin: 0 $gutter-half 0 0;
  }

  > .title {
    @include text-truncate ();
    margin: 0;
    font-weight: normal;
    text-align: left;
    flex-grow: 1;
  }

  > .title ~ * {
    margin: 0 0 0 $gutter-half;
  }

  > .description {
    font-weight: normal;
    margin-left: $gutter-half;
    opacity: .5;
  }

  &.empty {

    pointer-events: none !important;
    text-align: center;
    font-weight: normal;

    > :only-child {
      margin: 0 auto;
      text-align: center !important;
    }

  }

  .on-hover {
    opacity: 0;
    transition: none;
  }

  &:hover .on-hover {
    opacity: 1;
  }

  @for $i from 1 through length( $list-item-level-spacings ) {

    $spacing: nth( $list-item-level-spacings, $i );

    &.level-#{$i - 1} {
      padding-left: $spacing;
    }

  }

}


.list { /* TODO: Backport this to Svelto */
  padding: 0 !important;
  max-width: 100%;
  overflow-x: hidden;
  will-change: auto !important; /* Might be added by the library used for windowing, it causes some sharpness problems */
}


.popover .list {

  > .multiple {
    margin-bottom: 0 !important;
  }

}


.multi-editor {

  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  padding: $multi-editor-spacing;
  width: $multi-editor-width;
  max-width: $multi-editor-max-width;

  h1 {
    margin-bottom: $multi-editor-spacing;
    text-align: center;
  }

  .button {
    flex-grow: 1;
    flex-shrink: 0;
  }

  .actions-favorite,
  .actions-pin {
    flex-grow: 2;
  }

  .actions-delete {
    flex-grow: 3;
  }

  .tagbox {

    padding: $gutter !important;

    &-partial {
      padding: 0 !important;
      margin: 0 $gutter-half $gutter !important;
      min-width: 7.5em !important;
    }

  }

}


.preview {

  .copy-wrapper {

    position: relative;
    margin-bottom: 16px;

    &:last-child {
      margin-bottom: 0;
    }

    .copy {
      position: absolute;
      top: $gutter;
      right: $gutter;
      cursor: pointer;
      opacity: 0;
      transition: opacity $animation-fast;
      z-index: 1;
    }

    &:hover .copy {
      opacity: .5;
      &:hover {
        opacity: .75;
      }
      &:active {
        opacity: 1;
      }
    }

    > pre {
      margin-bottom: 0 !important;
    }

  }

}


.preview {

  code,
  pre {
    border-radius: 3px;
    direction: ltr;
    font-family: $highlighter-font-family;
    font-size: $highlighter-font-size;
    hyphens: none;
    line-height: $highlighter-line-height;
    margin: 1em 0;
    overflow: auto;
    padding: 1.2em;
    tab-size: 2;
    text-align: left;
    white-space: pre;
    word-spacing: normal;
  }

  p code,
  li code,
  table code {
    font-size: $highlighter-font-size;
  }

  :not(pre) > code[class*='language-'] {
    padding: 0.1em;
    border-radius: 0.3em;
  }

  .token.entity {
    cursor: help;
  }

  .token.italic {
    font-style: italic;
  }

  .token.bold {
    font-weight: 600;
  }

  .namespace {
    opacity: 0.7;
  }

}

// Copied from `node_modules/katex/dist/katex.css`
//   - Removed non-woff2 fonts
//   - Replaced `font/` with `#{$icon-path-fonts}`

@font-face {
  font-family: 'KaTeX_AMS';
  src: url(#{$icon-path-fonts}KaTeX_AMS-Regular.woff2) format('woff2');
  font-weight: normal;
  font-style: normal;
}
@font-face {
  font-family: 'KaTeX_Caligraphic';
  src: url(#{$icon-path-fonts}KaTeX_Caligraphic-Bold.woff2) format('woff2');
  font-weight: bold;
  font-style: normal;
}
@font-face {
  font-family: 'KaTeX_Caligraphic';
  src: url(#{$icon-path-fonts}KaTeX_Caligraphic-Regular.woff2) format('woff2');
  font-weight: normal;
  font-style: normal;
}
@font-face {
  font-family: 'KaTeX_Fraktur';
  src: url(#{$icon-path-fonts}KaTeX_Fraktur-Bold.woff2) format('woff2');
  font-weight: bold;
  font-style: normal;
}
@font-face {
  font-family: 'KaTeX_Fraktur';
  src: url(#{$icon-path-fonts}KaTeX_Fraktur-Regular.woff2) format('woff2');
  font-weight: normal;
  font-style: normal;
}
@font-face {
  font-family: 'KaTeX_Main';
  src: url(#{$icon-path-fonts}KaTeX_Main-Bold.woff2) format('woff2');
  font-weight: bold;
  font-style: normal;
}
@font-face {
  font-family: 'KaTeX_Main';
  src: url(#{$icon-path-fonts}KaTeX_Main-BoldItalic.woff2) format('woff2');
  font-weight: bold;
  font-style: italic;
}
@font-face {
  font-family: 'KaTeX_Main';
  src: url(#{$icon-path-fonts}KaTeX_Main-Italic.woff2) format('woff2');
  font-weight: normal;
  font-style: italic;
}
@font-face {
  font-family: 'KaTeX_Main';
  src: url(#{$icon-path-fonts}KaTeX_Main-Regular.woff2) format('woff2');
  font-weight: normal;
  font-style: normal;
}
@font-face {
  font-family: 'KaTeX_Math';
  src: url(#{$icon-path-fonts}KaTeX_Math-BoldItalic.woff2) format('woff2');
  font-weight: bold;
  font-style: italic;
}
@font-face {
  font-family: 'KaTeX_Math';
  src: url(#{$icon-path-fonts}KaTeX_Math-Italic.woff2) format('woff2');
  font-weight: normal;
  font-style: italic;
}
@font-face {
  font-family: 'KaTeX_SansSerif';
  src: url(#{$icon-path-fonts}KaTeX_SansSerif-Bold.woff2) format('woff2');
  font-weight: bold;
  font-style: normal;
}
@font-face {
  font-family: 'KaTeX_SansSerif';
  src: url(#{$icon-path-fonts}KaTeX_SansSerif-Italic.woff2) format('woff2');
  font-weight: normal;
  font-style: italic;
}
@font-face {
  font-family: 'KaTeX_SansSerif';
  src: url(#{$icon-path-fonts}KaTeX_SansSerif-Regular.woff2) format('woff2');
  font-weight: normal;
  font-style: normal;
}
@font-face {
  font-family: 'KaTeX_Script';
  src: url(#{$icon-path-fonts}KaTeX_Script-Regular.woff2) format('woff2');
  font-weight: normal;
  font-style: normal;
}
@font-face {
  font-family: 'KaTeX_Size1';
  src: url(#{$icon-path-fonts}KaTeX_Size1-Regular.woff2) format('woff2');
  font-weight: normal;
  font-style: normal;
}
@font-face {
  font-family: 'KaTeX_Size2';
  src: url(#{$icon-path-fonts}KaTeX_Size2-Regular.woff2) format('woff2');
  font-weight: normal;
  font-style: normal;
}
@font-face {
  font-family: 'KaTeX_Size3';
  src: url(#{$icon-path-fonts}KaTeX_Size3-Regular.woff2) format('woff2');
  font-weight: normal;
  font-style: normal;
}
@font-face {
  font-family: 'KaTeX_Size4';
  src: url(#{$icon-path-fonts}KaTeX_Size4-Regular.woff2) format('woff2');
  font-weight: normal;
  font-style: normal;
}
@font-face {
  font-family: 'KaTeX_Typewriter';
  src: url(#{$icon-path-fonts}KaTeX_Typewriter-Regular.woff2) format('woff2');
  font-weight: normal;
  font-style: normal;
}
.katex {
  font: normal 1.21em KaTeX_Main, Times New Roman, serif;
  line-height: 1.2;
  text-indent: 0;
  text-rendering: auto;
}
.katex * {
  -ms-high-contrast-adjust: none !important;
}
.katex .katex-version::after {
  content: "0.10.2";
}
.katex .katex-mathml {
  position: absolute;
  clip: rect(1px, 1px, 1px, 1px);
  padding: 0;
  border: 0;
  height: 1px;
  width: 1px;
  overflow: hidden;
}
.katex .katex-html {
  /* \newline is an empty block at top level, between .base elements */
}
.katex .katex-html > .newline {
  display: block;
}
.katex .base {
  position: relative;
  display: inline-block;
  white-space: nowrap;
  width: min-content;
}
.katex .strut {
  display: inline-block;
}
.katex .textbf {
  font-weight: bold;
}
.katex .textit {
  font-style: italic;
}
.katex .textrm {
  font-family: KaTeX_Main;
}
.katex .textsf {
  font-family: KaTeX_SansSerif;
}
.katex .texttt {
  font-family: KaTeX_Typewriter;
}
.katex .mathdefault {
  font-family: KaTeX_Math;
  font-style: italic;
}
.katex .mathit {
  font-family: KaTeX_Main;
  font-style: italic;
}
.katex .mathrm {
  font-style: normal;
}
.katex .mathbf {
  font-family: KaTeX_Main;
  font-weight: bold;
}
.katex .boldsymbol {
  font-family: KaTeX_Math;
  font-weight: bold;
  font-style: italic;
}
.katex .amsrm {
  font-family: KaTeX_AMS;
}
.katex .mathbb,
.katex .textbb {
  font-family: KaTeX_AMS;
}
.katex .mathcal {
  font-family: KaTeX_Caligraphic;
}
.katex .mathfrak,
.katex .textfrak {
  font-family: KaTeX_Fraktur;
}
.katex .mathtt {
  font-family: KaTeX_Typewriter;
}
.katex .mathscr,
.katex .textscr {
  font-family: KaTeX_Script;
}
.katex .mathsf,
.katex .textsf {
  font-family: KaTeX_SansSerif;
}
.katex .mathboldsf,
.katex .textboldsf {
  font-family: KaTeX_SansSerif;
  font-weight: bold;
}
.katex .mathitsf,
.katex .textitsf {
  font-family: KaTeX_SansSerif;
  font-style: italic;
}
.katex .mainrm {
  font-family: KaTeX_Main;
  font-style: normal;
}
.katex .vlist-t {
  display: inline-table;
  table-layout: fixed;
}
.katex .vlist-r {
  display: table-row;
}
.katex .vlist {
  display: table-cell;
  vertical-align: bottom;
  position: relative;
}
.katex .vlist > span {
  display: block;
  height: 0;
  position: relative;
}
.katex .vlist > span > span {
  display: inline-block;
}
.katex .vlist > span > .pstrut {
  overflow: hidden;
  width: 0;
}
.katex .vlist-t2 {
  margin-right: -2px;
}
.katex .vlist-s {
  display: table-cell;
  vertical-align: bottom;
  font-size: 1px;
  width: 2px;
  min-width: 2px;
}
.katex .msupsub {
  text-align: left;
}
.katex .mfrac > span > span {
  text-align: center;
}
.katex .mfrac .frac-line {
  display: inline-block;
  width: 100%;
  border-bottom-style: solid;
}
.katex .mfrac .frac-line,
.katex .overline .overline-line,
.katex .underline .underline-line,
.katex .hline,
.katex .hdashline,
.katex .rule {
  min-height: 1px;
}
.katex .mspace {
  display: inline-block;
}
.katex .llap,
.katex .rlap,
.katex .clap {
  width: 0;
  position: relative;
}
.katex .llap > .inner,
.katex .rlap > .inner,
.katex .clap > .inner {
  position: absolute;
}
.katex .llap > .fix,
.katex .rlap > .fix,
.katex .clap > .fix {
  display: inline-block;
}
.katex .llap > .inner {
  right: 0;
}
.katex .rlap > .inner,
.katex .clap > .inner {
  left: 0;
}
.katex .clap > .inner > span {
  margin-left: -50%;
  margin-right: 50%;
}
.katex .rule {
  display: inline-block;
  border: solid 0;
  position: relative;
}
.katex .overline .overline-line,
.katex .underline .underline-line,
.katex .hline {
  display: inline-block;
  width: 100%;
  border-bottom-style: solid;
}
.katex .hdashline {
  display: inline-block;
  width: 100%;
  border-bottom-style: dashed;
}
.katex .sqrt > .root {
  margin-left: 0.27777778em;
  margin-right: -0.55555556em;
}
.katex .sizing,
.katex .fontsize-ensurer {
  display: inline-block;
}
.katex .sizing.reset-size1.size1,
.katex .fontsize-ensurer.reset-size1.size1 {
  font-size: 1em;
}
.katex .sizing.reset-size1.size2,
.katex .fontsize-ensurer.reset-size1.size2 {
  font-size: 1.2em;
}
.katex .sizing.reset-size1.size3,
.katex .fontsize-ensurer.reset-size1.size3 {
  font-size: 1.4em;
}
.katex .sizing.reset-size1.size4,
.katex .fontsize-ensurer.reset-size1.size4 {
  font-size: 1.6em;
}
.katex .sizing.reset-size1.size5,
.katex .fontsize-ensurer.reset-size1.size5 {
  font-size: 1.8em;
}
.katex .sizing.reset-size1.size6,
.katex .fontsize-ensurer.reset-size1.size6 {
  font-size: 2em;
}
.katex .sizing.reset-size1.size7,
.katex .fontsize-ensurer.reset-size1.size7 {
  font-size: 2.4em;
}
.katex .sizing.reset-size1.size8,
.katex .fontsize-ensurer.reset-size1.size8 {
  font-size: 2.88em;
}
.katex .sizing.reset-size1.size9,
.katex .fontsize-ensurer.reset-size1.size9 {
  font-size: 3.456em;
}
.katex .sizing.reset-size1.size10,
.katex .fontsize-ensurer.reset-size1.size10 {
  font-size: 4.148em;
}
.katex .sizing.reset-size1.size11,
.katex .fontsize-ensurer.reset-size1.size11 {
  font-size: 4.976em;
}
.katex .sizing.reset-size2.size1,
.katex .fontsize-ensurer.reset-size2.size1 {
  font-size: 0.83333333em;
}
.katex .sizing.reset-size2.size2,
.katex .fontsize-ensurer.reset-size2.size2 {
  font-size: 1em;
}
.katex .sizing.reset-size2.size3,
.katex .fontsize-ensurer.reset-size2.size3 {
  font-size: 1.16666667em;
}
.katex .sizing.reset-size2.size4,
.katex .fontsize-ensurer.reset-size2.size4 {
  font-size: 1.33333333em;
}
.katex .sizing.reset-size2.size5,
.katex .fontsize-ensurer.reset-size2.size5 {
  font-size: 1.5em;
}
.katex .sizing.reset-size2.size6,
.katex .fontsize-ensurer.reset-size2.size6 {
  font-size: 1.66666667em;
}
.katex .sizing.reset-size2.size7,
.katex .fontsize-ensurer.reset-size2.size7 {
  font-size: 2em;
}
.katex .sizing.reset-size2.size8,
.katex .fontsize-ensurer.reset-size2.size8 {
  font-size: 2.4em;
}
.katex .sizing.reset-size2.size9,
.katex .fontsize-ensurer.reset-size2.size9 {
  font-size: 2.88em;
}
.katex .sizing.reset-size2.size10,
.katex .fontsize-ensurer.reset-size2.size10 {
  font-size: 3.45666667em;
}
.katex .sizing.reset-size2.size11,
.katex .fontsize-ensurer.reset-size2.size11 {
  font-size: 4.14666667em;
}
.katex .sizing.reset-size3.size1,
.katex .fontsize-ensurer.reset-size3.size1 {
  font-size: 0.71428571em;
}
.katex .sizing.reset-size3.size2,
.katex .fontsize-ensurer.reset-size3.size2 {
  font-size: 0.85714286em;
}
.katex .sizing.reset-size3.size3,
.katex .fontsize-ensurer.reset-size3.size3 {
  font-size: 1em;
}
.katex .sizing.reset-size3.size4,
.katex .fontsize-ensurer.reset-size3.size4 {
  font-size: 1.14285714em;
}
.katex .sizing.reset-size3.size5,
.katex .fontsize-ensurer.reset-size3.size5 {
  font-size: 1.28571429em;
}
.katex .sizing.reset-size3.size6,
.katex .fontsize-ensurer.reset-size3.size6 {
  font-size: 1.42857143em;
}
.katex .sizing.reset-size3.size7,
.katex .fontsize-ensurer.reset-size3.size7 {
  font-size: 1.71428571em;
}
.katex .sizing.reset-size3.size8,
.katex .fontsize-ensurer.reset-size3.size8 {
  font-size: 2.05714286em;
}
.katex .sizing.reset-size3.size9,
.katex .fontsize-ensurer.reset-size3.size9 {
  font-size: 2.46857143em;
}
.katex .sizing.reset-size3.size10,
.katex .fontsize-ensurer.reset-size3.size10 {
  font-size: 2.96285714em;
}
.katex .sizing.reset-size3.size11,
.katex .fontsize-ensurer.reset-size3.size11 {
  font-size: 3.55428571em;
}
.katex .sizing.reset-size4.size1,
.katex .fontsize-ensurer.reset-size4.size1 {
  font-size: 0.625em;
}
.katex .sizing.reset-size4.size2,
.katex .fontsize-ensurer.reset-size4.size2 {
  font-size: 0.75em;
}
.katex .sizing.reset-size4.size3,
.katex .fontsize-ensurer.reset-size4.size3 {
  font-size: 0.875em;
}
.katex .sizing.reset-size4.size4,
.katex .fontsize-ensurer.reset-size4.size4 {
  font-size: 1em;
}
.katex .sizing.reset-size4.size5,
.katex .fontsize-ensurer.reset-size4.size5 {
  font-size: 1.125em;
}
.katex .sizing.reset-size4.size6,
.katex .fontsize-ensurer.reset-size4.size6 {
  font-size: 1.25em;
}
.katex .sizing.reset-size4.size7,
.katex .fontsize-ensurer.reset-size4.size7 {
  font-size: 1.5em;
}
.katex .sizing.reset-size4.size8,
.katex .fontsize-ensurer.reset-size4.size8 {
  font-size: 1.8em;
}
.katex .sizing.reset-size4.size9,
.katex .fontsize-ensurer.reset-size4.size9 {
  font-size: 2.16em;
}
.katex .sizing.reset-size4.size10,
.katex .fontsize-ensurer.reset-size4.size10 {
  font-size: 2.5925em;
}
.katex .sizing.reset-size4.size11,
.katex .fontsize-ensurer.reset-size4.size11 {
  font-size: 3.11em;
}
.katex .sizing.reset-size5.size1,
.katex .fontsize-ensurer.reset-size5.size1 {
  font-size: 0.55555556em;
}
.katex .sizing.reset-size5.size2,
.katex .fontsize-ensurer.reset-size5.size2 {
  font-size: 0.66666667em;
}
.katex .sizing.reset-size5.size3,
.katex .fontsize-ensurer.reset-size5.size3 {
  font-size: 0.77777778em;
}
.katex .sizing.reset-size5.size4,
.katex .fontsize-ensurer.reset-size5.size4 {
  font-size: 0.88888889em;
}
.katex .sizing.reset-size5.size5,
.katex .fontsize-ensurer.reset-size5.size5 {
  font-size: 1em;
}
.katex .sizing.reset-size5.size6,
.katex .fontsize-ensurer.reset-size5.size6 {
  font-size: 1.11111111em;
}
.katex .sizing.reset-size5.size7,
.katex .fontsize-ensurer.reset-size5.size7 {
  font-size: 1.33333333em;
}
.katex .sizing.reset-size5.size8,
.katex .fontsize-ensurer.reset-size5.size8 {
  font-size: 1.6em;
}
.katex .sizing.reset-size5.size9,
.katex .fontsize-ensurer.reset-size5.size9 {
  font-size: 1.92em;
}
.katex .sizing.reset-size5.size10,
.katex .fontsize-ensurer.reset-size5.size10 {
  font-size: 2.30444444em;
}
.katex .sizing.reset-size5.size11,
.katex .fontsize-ensurer.reset-size5.size11 {
  font-size: 2.76444444em;
}
.katex .sizing.reset-size6.size1,
.katex .fontsize-ensurer.reset-size6.size1 {
  font-size: 0.5em;
}
.katex .sizing.reset-size6.size2,
.katex .fontsize-ensurer.reset-size6.size2 {
  font-size: 0.6em;
}
.katex .sizing.reset-size6.size3,
.katex .fontsize-ensurer.reset-size6.size3 {
  font-size: 0.7em;
}
.katex .sizing.reset-size6.size4,
.katex .fontsize-ensurer.reset-size6.size4 {
  font-size: 0.8em;
}
.katex .sizing.reset-size6.size5,
.katex .fontsize-ensurer.reset-size6.size5 {
  font-size: 0.9em;
}
.katex .sizing.reset-size6.size6,
.katex .fontsize-ensurer.reset-size6.size6 {
  font-size: 1em;
}
.katex .sizing.reset-size6.size7,
.katex .fontsize-ensurer.reset-size6.size7 {
  font-size: 1.2em;
}
.katex .sizing.reset-size6.size8,
.katex .fontsize-ensurer.reset-size6.size8 {
  font-size: 1.44em;
}
.katex .sizing.reset-size6.size9,
.katex .fontsize-ensurer.reset-size6.size9 {
  font-size: 1.728em;
}
.katex .sizing.reset-size6.size10,
.katex .fontsize-ensurer.reset-size6.size10 {
  font-size: 2.074em;
}
.katex .sizing.reset-size6.size11,
.katex .fontsize-ensurer.reset-size6.size11 {
  font-size: 2.488em;
}
.katex .sizing.reset-size7.size1,
.katex .fontsize-ensurer.reset-size7.size1 {
  font-size: 0.41666667em;
}
.katex .sizing.reset-size7.size2,
.katex .fontsize-ensurer.reset-size7.size2 {
  font-size: 0.5em;
}
.katex .sizing.reset-size7.size3,
.katex .fontsize-ensurer.reset-size7.size3 {
  font-size: 0.58333333em;
}
.katex .sizing.reset-size7.size4,
.katex .fontsize-ensurer.reset-size7.size4 {
  font-size: 0.66666667em;
}
.katex .sizing.reset-size7.size5,
.katex .fontsize-ensurer.reset-size7.size5 {
  font-size: 0.75em;
}
.katex .sizing.reset-size7.size6,
.katex .fontsize-ensurer.reset-size7.size6 {
  font-size: 0.83333333em;
}
.katex .sizing.reset-size7.size7,
.katex .fontsize-ensurer.reset-size7.size7 {
  font-size: 1em;
}
.katex .sizing.reset-size7.size8,
.katex .fontsize-ensurer.reset-size7.size8 {
  font-size: 1.2em;
}
.katex .sizing.reset-size7.size9,
.katex .fontsize-ensurer.reset-size7.size9 {
  font-size: 1.44em;
}
.katex .sizing.reset-size7.size10,
.katex .fontsize-ensurer.reset-size7.size10 {
  font-size: 1.72833333em;
}
.katex .sizing.reset-size7.size11,
.katex .fontsize-ensurer.reset-size7.size11 {
  font-size: 2.07333333em;
}
.katex .sizing.reset-size8.size1,
.katex .fontsize-ensurer.reset-size8.size1 {
  font-size: 0.34722222em;
}
.katex .sizing.reset-size8.size2,
.katex .fontsize-ensurer.reset-size8.size2 {
  font-size: 0.41666667em;
}
.katex .sizing.reset-size8.size3,
.katex .fontsize-ensurer.reset-size8.size3 {
  font-size: 0.48611111em;
}
.katex .sizing.reset-size8.size4,
.katex .fontsize-ensurer.reset-size8.size4 {
  font-size: 0.55555556em;
}
.katex .sizing.reset-size8.size5,
.katex .fontsize-ensurer.reset-size8.size5 {
  font-size: 0.625em;
}
.katex .sizing.reset-size8.size6,
.katex .fontsize-ensurer.reset-size8.size6 {
  font-size: 0.69444444em;
}
.katex .sizing.reset-size8.size7,
.katex .fontsize-ensurer.reset-size8.size7 {
  font-size: 0.83333333em;
}
.katex .sizing.reset-size8.size8,
.katex .fontsize-ensurer.reset-size8.size8 {
  font-size: 1em;
}
.katex .sizing.reset-size8.size9,
.katex .fontsize-ensurer.reset-size8.size9 {
  font-size: 1.2em;
}
.katex .sizing.reset-size8.size10,
.katex .fontsize-ensurer.reset-size8.size10 {
  font-size: 1.44027778em;
}
.katex .sizing.reset-size8.size11,
.katex .fontsize-ensurer.reset-size8.size11 {
  font-size: 1.72777778em;
}
.katex .sizing.reset-size9.size1,
.katex .fontsize-ensurer.reset-size9.size1 {
  font-size: 0.28935185em;
}
.katex .sizing.reset-size9.size2,
.katex .fontsize-ensurer.reset-size9.size2 {
  font-size: 0.34722222em;
}
.katex .sizing.reset-size9.size3,
.katex .fontsize-ensurer.reset-size9.size3 {
  font-size: 0.40509259em;
}
.katex .sizing.reset-size9.size4,
.katex .fontsize-ensurer.reset-size9.size4 {
  font-size: 0.46296296em;
}
.katex .sizing.reset-size9.size5,
.katex .fontsize-ensurer.reset-size9.size5 {
  font-size: 0.52083333em;
}
.katex .sizing.reset-size9.size6,
.katex .fontsize-ensurer.reset-size9.size6 {
  font-size: 0.5787037em;
}
.katex .sizing.reset-size9.size7,
.katex .fontsize-ensurer.reset-size9.size7 {
  font-size: 0.69444444em;
}
.katex .sizing.reset-size9.size8,
.katex .fontsize-ensurer.reset-size9.size8 {
  font-size: 0.83333333em;
}
.katex .sizing.reset-size9.size9,
.katex .fontsize-ensurer.reset-size9.size9 {
  font-size: 1em;
}
.katex .sizing.reset-size9.size10,
.katex .fontsize-ensurer.reset-size9.size10 {
  font-size: 1.20023148em;
}
.katex .sizing.reset-size9.size11,
.katex .fontsize-ensurer.reset-size9.size11 {
  font-size: 1.43981481em;
}
.katex .sizing.reset-size10.size1,
.katex .fontsize-ensurer.reset-size10.size1 {
  font-size: 0.24108004em;
}
.katex .sizing.reset-size10.size2,
.katex .fontsize-ensurer.reset-size10.size2 {
  font-size: 0.28929605em;
}
.katex .sizing.reset-size10.size3,
.katex .fontsize-ensurer.reset-size10.size3 {
  font-size: 0.33751205em;
}
.katex .sizing.reset-size10.size4,
.katex .fontsize-ensurer.reset-size10.size4 {
  font-size: 0.38572806em;
}
.katex .sizing.reset-size10.size5,
.katex .fontsize-ensurer.reset-size10.size5 {
  font-size: 0.43394407em;
}
.katex .sizing.reset-size10.size6,
.katex .fontsize-ensurer.reset-size10.size6 {
  font-size: 0.48216008em;
}
.katex .sizing.reset-size10.size7,
.katex .fontsize-ensurer.reset-size10.size7 {
  font-size: 0.57859209em;
}
.katex .sizing.reset-size10.size8,
.katex .fontsize-ensurer.reset-size10.size8 {
  font-size: 0.69431051em;
}
.katex .sizing.reset-size10.size9,
.katex .fontsize-ensurer.reset-size10.size9 {
  font-size: 0.83317261em;
}
.katex .sizing.reset-size10.size10,
.katex .fontsize-ensurer.reset-size10.size10 {
  font-size: 1em;
}
.katex .sizing.reset-size10.size11,
.katex .fontsize-ensurer.reset-size10.size11 {
  font-size: 1.19961427em;
}
.katex .sizing.reset-size11.size1,
.katex .fontsize-ensurer.reset-size11.size1 {
  font-size: 0.20096463em;
}
.katex .sizing.reset-size11.size2,
.katex .fontsize-ensurer.reset-size11.size2 {
  font-size: 0.24115756em;
}
.katex .sizing.reset-size11.size3,
.katex .fontsize-ensurer.reset-size11.size3 {
  font-size: 0.28135048em;
}
.katex .sizing.reset-size11.size4,
.katex .fontsize-ensurer.reset-size11.size4 {
  font-size: 0.32154341em;
}
.katex .sizing.reset-size11.size5,
.katex .fontsize-ensurer.reset-size11.size5 {
  font-size: 0.36173633em;
}
.katex .sizing.reset-size11.size6,
.katex .fontsize-ensurer.reset-size11.size6 {
  font-size: 0.40192926em;
}
.katex .sizing.reset-size11.size7,
.katex .fontsize-ensurer.reset-size11.size7 {
  font-size: 0.48231511em;
}
.katex .sizing.reset-size11.size8,
.katex .fontsize-ensurer.reset-size11.size8 {
  font-size: 0.57877814em;
}
.katex .sizing.reset-size11.size9,
.katex .fontsize-ensurer.reset-size11.size9 {
  font-size: 0.69453376em;
}
.katex .sizing.reset-size11.size10,
.katex .fontsize-ensurer.reset-size11.size10 {
  font-size: 0.83360129em;
}
.katex .sizing.reset-size11.size11,
.katex .fontsize-ensurer.reset-size11.size11 {
  font-size: 1em;
}
.katex .delimsizing.size1 {
  font-family: KaTeX_Size1;
}
.katex .delimsizing.size2 {
  font-family: KaTeX_Size2;
}
.katex .delimsizing.size3 {
  font-family: KaTeX_Size3;
}
.katex .delimsizing.size4 {
  font-family: KaTeX_Size4;
}
.katex .delimsizing.mult .delim-size1 > span {
  font-family: KaTeX_Size1;
}
.katex .delimsizing.mult .delim-size4 > span {
  font-family: KaTeX_Size4;
}
.katex .nulldelimiter {
  display: inline-block;
  width: 0.12em;
}
.katex .delimcenter {
  position: relative;
}
.katex .op-symbol {
  position: relative;
}
.katex .op-symbol.small-op {
  font-family: KaTeX_Size1;
}
.katex .op-symbol.large-op {
  font-family: KaTeX_Size2;
}
.katex .op-limits > .vlist-t {
  text-align: center;
}
.katex .accent > .vlist-t {
  text-align: center;
}
.katex .accent .accent-body {
  position: relative;
}
.katex .accent .accent-body:not(.accent-full) {
  width: 0;
}
.katex .overlay {
  display: block;
}
.katex .mtable .vertical-separator {
  display: inline-block;
  margin: 0 -0.025em;
  border-right: 0.05em solid;
  min-width: 1px;
}
.katex .mtable .vs-dashed {
  border-right: 0.05em dashed;
}
.katex .mtable .arraycolsep {
  display: inline-block;
}
.katex .mtable .col-align-c > .vlist-t {
  text-align: center;
}
.katex .mtable .col-align-l > .vlist-t {
  text-align: left;
}
.katex .mtable .col-align-r > .vlist-t {
  text-align: right;
}
.katex .svg-align {
  text-align: left;
}
.katex svg {
  display: block;
  position: absolute;
  width: 100%;
  height: inherit;
  fill: currentColor;
  stroke: currentColor;
  fill-rule: nonzero;
  fill-opacity: 1;
  stroke-width: 1;
  stroke-linecap: butt;
  stroke-linejoin: miter;
  stroke-miterlimit: 4;
  stroke-dasharray: none;
  stroke-dashoffset: 0;
  stroke-opacity: 1;
}
.katex svg path {
  stroke: none;
}
.katex img {
  border-style: none;
  min-width: 0;
  min-height: 0;
  max-width: none;
  max-height: none;
}
.katex .stretchy {
  width: 100%;
  display: block;
  position: relative;
  overflow: hidden;
}
.katex .stretchy::before,
.katex .stretchy::after {
  content: "";
}
.katex .hide-tail {
  width: 100%;
  position: relative;
  overflow: hidden;
}
.katex .halfarrow-left {
  position: absolute;
  left: 0;
  width: 50.2%;
  overflow: hidden;
}
.katex .halfarrow-right {
  position: absolute;
  right: 0;
  width: 50.2%;
  overflow: hidden;
}
.katex .brace-left {
  position: absolute;
  left: 0;
  width: 25.1%;
  overflow: hidden;
}
.katex .brace-center {
  position: absolute;
  left: 25%;
  width: 50%;
  overflow: hidden;
}
.katex .brace-right {
  position: absolute;
  right: 0;
  width: 25.1%;
  overflow: hidden;
}
.katex .x-arrow-pad {
  padding: 0 0.5em;
}
.katex .x-arrow,
.katex .mover,
.katex .munder {
  text-align: center;
}
.katex .boxpad {
  padding: 0 0.3em 0 0.3em;
}
.katex .fbox,
.katex .fcolorbox {
  box-sizing: border-box;
  border: 0.04em solid;
}
.katex .cancel-pad {
  padding: 0 0.2em 0 0.2em;
}
.katex .cancel-lap {
  margin-left: -0.2em;
  margin-right: -0.2em;
}
.katex .sout {
  border-bottom-style: solid;
  border-bottom-width: 0.08em;
}
.katex-display {
  display: block;
  margin: 1em 0;
  text-align: center;
}
.katex-display > .katex {
  display: block;
  text-align: center;
  white-space: nowrap;
}
.katex-display > .katex > .katex-html {
  display: block;
  position: relative;
}
.katex-display > .katex > .katex-html > .tag {
  position: absolute;
  right: 0;
}
.katex-display.leqno > .katex > .katex-html > .tag {
  left: 0;
  right: auto;
}
.katex-display.fleqn > .katex {
  text-align: left;
}


.preview {

  .mermaid {

    text-align: center;

    text[font-size="14"] { // Otherwise the configurated value does not get set
      font-size: 14px !important;
    }

  }

}


.preview {

  .mermaid {

    position: relative;

    .mermaid-open-external {
      position: absolute;
      top: $gutter-half;
      right: $gutter;
      cursor: pointer;
      opacity: 0;
      transition: opacity $animation-fast;
      z-index: 1;
    }

    &:hover .mermaid-open-external {
      opacity: .5;
      &:hover {
        opacity: .75;
      }
      &:active {
        opacity: 1;
      }
    }

  }

}


/* Based on GitHub's Primer framework: https://github.com/primer/css */

.preview {

  user-select: text !important;
  padding: $preview-spacing-y $preview-spacing-x !important;
  font-size: $preview-font-size;
  line-height: $preview-line-height;

  /* SPACING */

  > :first-child {
    margin-top: 0 !important;
  }

  > :last-child {
    margin-bottom: 0 !important;
  }

  p,
  blockquote,
  ul,
  ol,
  dl,
  table,
  pre {

    margin-top: 0;
    margin-bottom: 16px;

    &:last-child {
      margin-bottom: 0;
    }

  }

  /* HEADING */

  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {

    margin-top: 24px;
    margin-bottom: 16px;
    font-weight: 600;
    line-height: 1.25;

    &:last-child {
      margin-bottom: 0;
    }

  }

  h1 code,
  h2 code,
  h3 code,
  h4 code,
  h5 code,
  h6 code {
    font-size: inherit;
  }

  h1 {
    padding-bottom: 0.3em;
    font-size: 2em;
    border-bottom-width: 1px;
    border-bottom-style: solid;
  }

  h2 {
    padding-bottom: 0.3em;
    font-size: 1.5em;
    border-bottom-width: 1px;
    border-bottom-style: solid;
  }

  h3 {
    font-size: 1.25em;
  }

  h4 {
    font-size: 1em;
  }

  h5 {
    font-size: 0.875em;
  }

  h6 {
    font-size: 0.85em;
  }

  /* LIST */

  ul,
  ol {
    padding-left: 2em;
  }

  ul ul,
  ul ol,
  ol ol,
  ol ul {
    margin-top: 0;
    margin-bottom: 0;
  }

  li {
    word-wrap: break-all;
  }

  li > p {
    margin-top: 16px;
  }

  li + li {
    margin-top: .25em;
  }

  /* LINK */

  a:not([href]) {
    color: inherit;
    text-decoration: none;
  }

  /* IMAGE */

  img {
    max-width: 100%;
    box-sizing: content-box;
    background-color: transparent;
  }

  img[align=right] {
    padding-left: 20px;
  }

  img[align=left] {
    padding-right: 20px;
  }

  /* TASK */

  input[type="checkbox"] {
    appearance: checkbox !important;
    -webkit-appearance: checkbox !important;
    display: inline-block;
    margin: 0 0.35em 0.25em 0 !important;
    opacity: 1;
  }

  .task-list-item {

    margin-left: -1.3em;
    list-style-type: none;

    .task-list-item {
      margin-left: 0;
    }

    > p {
      margin: 0;
    }

  }

  /* CODE  */

  pre {
    display: block;
    word-wrap: normal;
    padding: 16px;
    overflow: auto;
    font-size: 85%;
    line-height: 1.45;
    border-radius: 3px;
  }

  code {
    padding: 0.2em 0.4em;
    margin: 0;
    font-size: 85%;
    border-radius: 3px;
  }

  pre > code {
    padding: 0;
    margin: 0;
    font-size: 100%;
    word-break: normal;
    white-space: pre;
    background: transparent !important;
    border: 0;
  }

  pre code {
    display: inline;
    max-width: auto;
    padding: 0;
    margin: 0;
    overflow: visible;
    line-height: inherit;
    word-wrap: normal;
    background-color: transparent;
    border: 0;
  }

  p code,
  li code,
  table code {
    margin: 0;
    border-radius: 3px;
    padding: .2em .4em !important;
  }

  del code {
    text-decoration: inherit;
  }

  /* TABLE */

  table {
    border-collapse: collapse;
    display: block;
    width: 100%;
    overflow: auto;
  }

  table th {
    font-weight: 600;
  }

  table th,
  table td {
    padding: 6px 13px;
    border-width: 1px;
    border-style: solid;
  }

  table th > :last-child,
  table td > :last-child {
    margin-bottom: 0;
  }

  /* BLOCKQUOTE */

  blockquote {
    padding: 0 1em;
    border-left-width: 0.25em;
    border-left-style: solid;
    margin-left: 0;
    margin-right: 0;
  }

  blockquote > :first-child {
    margin-top: 0;
  }

  blockquote > :last-child {
    margin-bottom: 0;
  }

  /* DECLARATION LIST */

  dl {
    padding: 0;
  }

  dl dt {
    padding: 0;
    margin-top: 16px;
    font-size: 1em;
    font-style: italic;
    font-weight: 600;
  }

  dl dd {
    padding: 0 16px;
    margin-bottom: 16px;
  }

  /* KBD */

  kbd {
    font-family: inherit;
    display: inline-block;
    padding: 3px 5px;
    font-size: 11px;
    line-height: 10px;
    vertical-align: middle;
    border-width: 1px;
    border-style: solid;
    border-radius: 3px;
  }

  /* HR */

  hr {
    height: .25em;
    padding: 0;
    margin: 24px 0;
    border: 0;
  }

  /* STRONG */

  strong,
  b {
    font-weight: 600;
  }

  /* BUTTON */

  a.button {
    text-decoration: none !important;
    color: inherit !important;
  }

  a:not(.button) > i.icon {
    margin-right: $gutter-half;
    margin-top: -3px;
  }

  /* TOKENS */

  .mtk13 { //UGLY: This token shouldn't be hard-coded
    text-decoration: line-through;
    color: inherit;
  }

}


.quick-modal {

  top: 21px;
  width: $quick-modal-width;
  max-width: $quick-modal-max-width;

  &:not(.open) {
    transform: translate(-50%, -1rem);
  }

  &.open {
    transform: translateX(-50%);
  }

  .preview {
    height: auto;
  }

}


.quick-panel {

  top: 21px;
  width: $quick-panel-width;
  max-width: $quick-panel-max-width;

  &:not(.open) {
    transform: translate(-50%, -1rem);
  }

  &.open {
    transform: translateX(-50%);
  }

  .list {
    max-height: $quick-panel-list-max-height;
  }

}


.split-editor {

  height: 100% !important;

  & > .editor,
  & > .preview {
    height: auto;
    width: 50%;
  }

  & > .editor ~ .preview {
    border-left-width: 1px;
    border-left-style: solid;
  }

}


// @require widgets/toolbar/toolbar.scss

.titlebar {
  @extend .toolbar;
  text-align: center;
  font-size: 13px;
}


.about {

  background-color: $color-about-background;
  color: $color-about-color;

  > *:not(:last-child) {
    margin-bottom: $gutter-half !important;
  }

  .title {
    font-weight: bold;
  }

  .description {
    font-size: .5946142301em;
  }

}


.cwd {

  .layout-content {
    height: auto;
  }

  &.details {
    padding: $gutter #{$gutter * 2};
  }

  .button.default {
    @include theme-background-color ( transparent, rgba( #000000, .1 ), rgba( #000000, .2 ) ); /* UGLY */
  }

  .button.giant {
    font-size: 75px;
  }

}


.mainbar {
  flex: $mainbar-ratio $mainbar-ratio $mainbar-min-width;
  min-width: $mainbar-min-width;
}


.middlebar {

  flex: $middlebar-ratio $middlebar-ratio $middlebar-min-width;
  min-width: $middlebar-min-width;
  max-width: $middlebar-max-width;

  .search input {
    width: 0;
  }

  .list-header {

    .sort-by,
    .sort-type {
      cursor: pointer;
    }

    .sort-by {
      text-align: left;
    }

    .sort-type {
      i.icon {
        transition: transform $animation-fast;
      }
    }

  }

}


.zen {

  html.mac &:not(.fullscreen) .preview {
    padding-top: $toolbar-height !important;
  }

  .mainbar .toolbar {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    opacity: 0;
  }

  .popover:after { // Hiding the tip
    display: none !important;
  }

  .popover.open {
    margin-top: 0 !important;
  }

  html.mac &:not(.fullscreen) .popover.show {
    transform: translate($gutter, $toolbar-height) !important;
  }

  html.mac &.fullscreen .popover.show,
  html.no-mac & .popover.show {
    transform: translate($gutter, $gutter) !important;
  }

}


.sidebar {

  flex: $sidebar-ratio $sidebar-ratio $sidebar-min-width;
  min-width: $sidebar-min-width;
  max-width: $sidebar-max-width;

  .toolbar {
    opacity: 0;
  }

  .list-item i.icon.collapser {
    // transition: transform $animation-fast; //FIXME: Currently only when uncollpasing the chevron is animated
  }

}


.app,
.app-wrapper {
  width: 100%;
  height: 100%;
}
